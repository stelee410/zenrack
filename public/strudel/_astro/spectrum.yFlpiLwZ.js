import{P as A,K as yn,L as Me}from"./index.BSWU8L_a.js";import{o as Wn,e as ze,g as Kt}from"./index.BA8GaJAW.js";if(typeof DelayNode<"u"){class t extends DelayNode{constructor(n,c,a,o){super(n),c=Math.abs(c),this.delayTime.value=a;const s=n.createGain();s.gain.value=Math.min(Math.abs(o),.995),this.feedback=s.gain;const d=n.createGain();return d.gain.value=c,this.delayGain=d,this.connect(s),this.connect(d),s.connect(this),this.connect=l=>d.connect(l),this}start(n){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,n+this.delayTime.value)}}BaseAudioContext.prototype.createFeedbackDelay=function(e,n,c){return new t(this,e,n,c)}}var Ot={};Ot.generateReverb=function(t,e){for(var n=t.audioContext||new AudioContext,c=n.sampleRate,a=t.numChannels||2,o=t.decayTime*1.5,s=Math.round(t.decayTime*c),d=Math.round(o*c),l=Math.round((t.fadeInTime||0)*c),h=Math.pow(1/1e3,1/s),i=n.createBuffer(a,d,c),u=0;u<a;u++){for(var Z=i.getChannelData(u),b=0;b<d;b++)Z[b]=Mn()*Math.pow(h,b);for(var b=0;b<l;b++)Z[b]*=b/l}Vn(i,t.lpFreqStart||0,t.lpFreqEnd||0,t.decayTime,e)};Ot.generateGraph=function(t,e,n,c,a){var o=document.createElement("canvas");o.width=e,o.height=n;var s=o.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,o.width,o.height),s.fillStyle="#fff";for(var d=e/t.length,l=n/(a-c),h=0;h<t.length;h++)s.fillRect(h*d,n-(t[h]-c)*l,1,1);return o};var Vn=function(t,e,n,c,a){if(e==0){a(t);return}var o=Ln(t),s=new OfflineAudioContext(t.numberOfChannels,o[0].length,t.sampleRate),d=s.createBufferSource();d.buffer=t;var l=s.createBiquadFilter();e=Math.min(e,t.sampleRate/2),n=Math.min(n,t.sampleRate/2),l.type="lowpass",l.Q.value=1e-4,l.frequency.setValueAtTime(e,0),l.frequency.linearRampToValueAtTime(n,c),d.connect(l),l.connect(s.destination),d.start(),s.oncomplete=function(h){a(h.renderedBuffer),l.disconnect(),d.disconnect()},s.startRendering(),window.filterNode=l},Ln=function(t){for(var e=[],n=0;n<t.numberOfChannels;n++)e[n]=t.getChannelData(n);return e},Mn=function(){return Math.random()*2-1};let Ye=t=>console.log(t);function Re(t,e="superdough"){x(`[${e}] error: ${t.message}`)}const x=(...t)=>Ye(...t),zn=t=>{Ye=t},Yn=t=>{if(typeof t!="string")return[];const[e,n="",c]=t.match(/^([a-gA-G])([#bsf]*)(-?[0-9]*)$/)?.slice(1)||[];return e?[e,n,c?Number(c):void 0]:[]},Rn={c:0,d:2,e:4,f:5,g:7,a:9,b:11},xn={"#":1,b:-1,s:1,f:-1},fn=t=>t?.split("").reduce((e,n)=>e+xn[n],0)||0,Et=(t,e=3)=>{const[n,c,a=e]=Yn(t);if(!n)throw new Error('not a note: "'+t+'"');const o=Rn[n.toLowerCase()],s=fn(c);return(Number(a)+1)*12+o+s},Kn=t=>Math.pow(2,(t-69)/12)*440,at=(t,e,n)=>Math.min(Math.max(t,e),n),Sn=t=>12*Math.log(t/440)/Math.LN2+69,Nn=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:c}=t;return typeof n=="number"?Sn(n):typeof c=="string"?Et(c):typeof c=="number"?c:e};function D(t,e=0,n){return isNaN(Number(t))?(!n&&x(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const xe=(t,e)=>(t%e+e)%e,he=(t,e)=>xe(Math.round(D(t,0)),e);function Tn(t,e){return t/e}function fe(t,e){const{s:n,n:c=0}=t;let a=Nn(t,36),o=a-36,s,d=0;if(Array.isArray(e))d=he(c,e.length),s=e[d];else{const h=u=>Et(u)-a,i=Object.keys(e).filter(u=>!u.startsWith("_")).reduce((u,Z,b)=>!u||Math.abs(h(Z))<Math.abs(h(u))?Z:u,null);o=-h(i),d=he(c,e[i].length),s=e[i][d]}const l=`${n}:${d}`;return{transpose:o,url:s,index:d,midi:a,label:l}}const wt=(t,e)=>Object.fromEntries(Object.entries(e).map(([n,c])=>[n,t[c]])),Ke=t=>{try{return new URL(".",new URL(t)).href.replace(/\/$/,"")}catch{return t.split("/").slice(0,-1).join("/")}};typeof AudioContext<"u"&&(BaseAudioContext.prototype.adjustLength=function(t,e,n=1,c=0){const a=Math.floor(at(c,0,1)*e.length),o=e.sampleRate*t,s=this.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let d=0;d<e.numberOfChannels;d++){let l=e.getChannelData(d),h=s.getChannelData(d);for(let i=0;i<o;i++){let u=(a+i*Math.abs(n))%l.length;n<1&&(u=u*-1),h[i]=l.at(u)||0}}return s},BaseAudioContext.prototype.createReverb=function(t,e,n,c,a,o,s){const d=this.createConvolver();return d.generate=(l=2,h=.1,i=15e3,u=1e3,Z,b,X)=>{d.duration=l,d.fade=h,d.lp=i,d.dim=u,d.ir=Z,d.irspeed=b,d.irbegin=X,Z?d.buffer=this.adjustLength(l,Z,b,X):Ot.generateReverb({audioContext:this,numChannels:2,decayTime:l,fadeInTime:h,lpFreqStart:i,lpFreqEnd:u},G=>{d.buffer=G})},d.generate(t,e,n,c,a,o,s),d});var ue={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},ae:{freqs:[650,1515,2400,3e3,3350],gains:[1,.5,.1008,.0631,.0126],qs:[80,90,120,130,140]},aa:{freqs:[560,900,2570,3e3,3300],gains:[1,.5,.0708,.0631,.0126],qs:[80,90,120,130,140]},oe:{freqs:[500,1430,2300,3e3,3300],gains:[1,.2,.0708,.0316,.01995],qs:[40,60,100,120,120]},ue:{freqs:[250,1750,2150,3200,3300],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]},y:{freqs:[400,1460,2400,3e3,3300],gains:[1,.2,.0708,.0316,.02995],qs:[40,60,100,120,120]},uh:{freqs:[600,1250,2100,3100,3500],gains:[1,.3,.0608,.0316,.01995],qs:[40,70,100,120,130]},un:{freqs:[500,1240,2280,3e3,3500],gains:[1,.1,.1708,.0216,.02995],qs:[40,60,100,120,120]},en:{freqs:[600,1480,2450,3200,3300],gains:[1,.15,.0708,.0316,.02995],qs:[40,60,100,120,120]},an:{freqs:[700,1050,2500,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},on:{freqs:[500,1080,2350,3e3,3300],gains:[1,.1,.0708,.0316,.02995],qs:[40,60,100,120,120]},get æ(){return this.ae},get ø(){return this.oe},get ɑ(){return this.aa},get å(){return this.aa},get ö(){return this.oe},get ü(){return this.ue},get ı(){return this.y}};if(typeof GainNode<"u"){class t extends GainNode{constructor(n,c){if(super(n),!ue[c])throw new Error("vowel: unknown vowel "+c);const{gains:a,qs:o,freqs:s}=ue[c];this.makeupGain=n.createGain(),this.audioNodes=[];for(let d=0;d<5;d++){const l=n.createGain();l.gain.value=a[d];const h=n.createBiquadFilter();h.type="bandpass",h.Q.value=o[d],h.frequency.value=s[d],super.connect(h),h.connect(l),this.audioNodes.push(h),l.connect(this.makeupGain),this.audioNodes.push(l)}return this.makeupGain.gain.value=8,this}connect(n){this.makeupGain.connect(n)}disconnect(){this.makeupGain.disconnect(),this.audioNodes.forEach(n=>n.disconnect()),super.disconnect(),this.makeupGain=null,this.audioNodes=null}}BaseAudioContext.prototype.createVowelFilter=function(e){return new t(this,e)}}const Hn="data:text/javascript;base64,dmFyIF89ZnVuY3Rpb24oayl7InVzZSBzdHJpY3QiO3ZhciBGZT1PYmplY3QuZGVmaW5lUHJvcGVydHk7dmFyIENlPShrLFcsRyk9PlcgaW4gaz9GZShrLFcse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOkd9KTprW1ddPUc7dmFyIEF0PShrLFcsRyk9PkNlKGssdHlwZW9mIFchPSJzeW1ib2wiP1crIiI6VyxHKTtjbGFzcyBHIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuc3RhcnRlZD0hMSx0aGlzLm5iSW5wdXRzPXQubnVtYmVyT2ZJbnB1dHMsdGhpcy5uYk91dHB1dHM9dC5udW1iZXJPZk91dHB1dHMsdGhpcy5ibG9ja1NpemU9dC5wcm9jZXNzb3JPcHRpb25zLmJsb2NrU2l6ZSx0aGlzLmhvcFNpemU9MTI4LHRoaXMubmJPdmVybGFwcz10aGlzLmJsb2NrU2l6ZS90aGlzLmhvcFNpemUsdGhpcy5pbnB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpLHRoaXMuaW5wdXRCdWZmZXJzSGVhZD1uZXcgQXJyYXkodGhpcy5uYklucHV0cyksdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQ9bmV3IEFycmF5KHRoaXMubmJJbnB1dHMpO2ZvcihsZXQgZT0wO2U8dGhpcy5uYklucHV0cztlKyspdGhpcy5hbGxvY2F0ZUlucHV0Q2hhbm5lbHMoZSwxKTt0aGlzLm91dHB1dEJ1ZmZlcnM9bmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKSx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlPW5ldyBBcnJheSh0aGlzLm5iT3V0cHV0cyk7Zm9yKGxldCBlPTA7ZTx0aGlzLm5iT3V0cHV0cztlKyspdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGUsMSl9cmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKXtmb3IobGV0IHM9MDtzPHRoaXMubmJJbnB1dHM7cysrKXtsZXQgbj10W3NdLmxlbmd0aDtuIT10aGlzLmlucHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKHMsbil9Zm9yKGxldCBzPTA7czx0aGlzLm5iT3V0cHV0cztzKyspe2xldCBuPWVbc10ubGVuZ3RoO24hPXRoaXMub3V0cHV0QnVmZmVyc1tzXS5sZW5ndGgmJnRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhzLG4pfX1hbGxvY2F0ZUlucHV0Q2hhbm5lbHModCxlKXt0aGlzLmlucHV0QnVmZmVyc1t0XT1uZXcgQXJyYXkoZSk7Zm9yKGxldCBzPTA7czxlO3MrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKzEyOCksdGhpcy5pbnB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLmlucHV0QnVmZmVyc0hlYWRbdF09bmV3IEFycmF5KGUpLHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMuaW5wdXRCdWZmZXJzSGVhZFt0XVtzXT10aGlzLmlucHV0QnVmZmVyc1t0XVtzXS5zdWJhcnJheSgwLHRoaXMuYmxvY2tTaXplKSx0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKX1hbGxvY2F0ZU91dHB1dENoYW5uZWxzKHQsZSl7dGhpcy5vdXRwdXRCdWZmZXJzW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtzXT1uZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bc10uZmlsbCgwKTt0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdPW5ldyBBcnJheShlKTtmb3IobGV0IHM9MDtzPGU7cysrKXRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbdF1bc109bmV3IEZsb2F0MzJBcnJheSh0aGlzLmJsb2NrU2l6ZSksdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVt0XVtzXS5maWxsKDApfXJlYWRJbnB1dHModCl7aWYodFswXS5sZW5ndGgmJnRbMF1bMF0ubGVuZ3RoPT0wKXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5maWxsKDAsdGhpcy5ibG9ja1NpemUpO3JldHVybn1mb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IG49dFtlXVtzXTt0aGlzLmlucHV0QnVmZmVyc1tlXVtzXS5zZXQobix0aGlzLmJsb2NrU2l6ZSl9fXdyaXRlT3V0cHV0cyh0KXtmb3IobGV0IGU9MDtlPHRoaXMubmJJbnB1dHM7ZSsrKWZvcihsZXQgcz0wO3M8dGhpcy5pbnB1dEJ1ZmZlcnNbZV0ubGVuZ3RoO3MrKyl7bGV0IG49dGhpcy5vdXRwdXRCdWZmZXJzW2VdW3NdLnN1YmFycmF5KDAsMTI4KTt0W2VdW3NdLnNldChuKX19c2hpZnRJbnB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KX1zaGlmdE91dHB1dEJ1ZmZlcnMoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJPdXRwdXRzO3QrKylmb3IobGV0IGU9MDtlPHRoaXMub3V0cHV0QnVmZmVyc1t0XS5sZW5ndGg7ZSsrKXRoaXMub3V0cHV0QnVmZmVyc1t0XVtlXS5jb3B5V2l0aGluKDAsMTI4KSx0aGlzLm91dHB1dEJ1ZmZlcnNbdF1bZV0uc3ViYXJyYXkodGhpcy5ibG9ja1NpemUtMTI4KS5maWxsKDApfXByZXBhcmVJbnB1dEJ1ZmZlcnNUb1NlbmQoKXtmb3IobGV0IHQ9MDt0PHRoaXMubmJJbnB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5pbnB1dEJ1ZmZlcnNbdF0ubGVuZ3RoO2UrKyl0aGlzLmlucHV0QnVmZmVyc1RvU2VuZFt0XVtlXS5zZXQodGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW3RdW2VdKX1oYW5kbGVPdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSgpe2ZvcihsZXQgdD0wO3Q8dGhpcy5uYk91dHB1dHM7dCsrKWZvcihsZXQgZT0wO2U8dGhpcy5vdXRwdXRCdWZmZXJzW3RdLmxlbmd0aDtlKyspZm9yKGxldCBzPTA7czx0aGlzLmJsb2NrU2l6ZTtzKyspdGhpcy5vdXRwdXRCdWZmZXJzW3RdW2VdW3NdKz10aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW3RdW2VdW3NdL3RoaXMubmJPdmVybGFwc31wcm9jZXNzKHQsZSxzKXtjb25zdCBvPXRbMF1bMF0hPT12b2lkIDA7cmV0dXJuIHRoaXMuc3RhcnRlZCYmIW8/ITE6KHRoaXMuc3RhcnRlZD1vLHRoaXMucmVhbGxvY2F0ZUNoYW5uZWxzSWZOZWVkZWQodCxlKSx0aGlzLnJlYWRJbnB1dHModCksdGhpcy5zaGlmdElucHV0QnVmZmVycygpLHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpLHRoaXMucHJvY2Vzc09MQSh0aGlzLmlucHV0QnVmZmVyc1RvU2VuZCx0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlLHMpLHRoaXMuaGFuZGxlT3V0cHV0QnVmZmVyc1RvUmV0cmlldmUoKSx0aGlzLndyaXRlT3V0cHV0cyhlKSx0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpLCEwKX1wcm9jZXNzT0xBKHQsZSxzKXtjb25zb2xlLmFzc2VydCghMSwiTm90IG92ZXJyaWRlbiIpfX1jbGFzcyBMdHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLnNpemU9dHwwLHRoaXMuc2l6ZTw9MXx8dGhpcy5zaXplJnRoaXMuc2l6ZS0xKXRocm93IG5ldyBFcnJvcigiRkZUIHNpemUgbXVzdCBiZSBhIHBvd2VyIG9mIHR3byBhbmQgYmlnZ2VyIHRoYW4gMSIpO3RoaXMuX2NzaXplPXQ8PDE7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLnNpemUqMikscz0wO3M8ZS5sZW5ndGg7cys9Mil7Y29uc3QgYz1NYXRoLlBJKnMvdGhpcy5zaXplO2Vbc109TWF0aC5jb3MoYyksZVtzKzFdPS1NYXRoLnNpbihjKX10aGlzLnRhYmxlPWU7Zm9yKHZhciBuPTAsbz0xO3RoaXMuc2l6ZT5vO288PD0xKW4rKzt0aGlzLl93aWR0aD1uJTI9PT0wP24tMTpuLHRoaXMuX2JpdHJldj1uZXcgQXJyYXkoMTw8dGhpcy5fd2lkdGgpO2Zvcih2YXIgaT0wO2k8dGhpcy5fYml0cmV2Lmxlbmd0aDtpKyspe3RoaXMuX2JpdHJldltpXT0wO2Zvcih2YXIgYT0wO2E8dGhpcy5fd2lkdGg7YSs9Mil7dmFyIHU9dGhpcy5fd2lkdGgtYS0yO3RoaXMuX2JpdHJldltpXXw9KGk+Pj5hJjMpPDx1fX10aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGwsdGhpcy5faW52PTB9ZnJvbUNvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHxuZXcgQXJyYXkodC5sZW5ndGg+Pj4xKSxuPTA7bjx0Lmxlbmd0aDtuKz0yKXNbbj4+PjFdPXRbbl07cmV0dXJuIHN9Y3JlYXRlQ29tcGxleEFycmF5KCl7Y29uc3QgdD1uZXcgQXJyYXkodGhpcy5fY3NpemUpO2Zvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRbZV09MDtyZXR1cm4gdH10b0NvbXBsZXhBcnJheSh0LGUpe2Zvcih2YXIgcz1lfHx0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpLG49MDtuPHMubGVuZ3RoO24rPTIpc1tuXT10W24+Pj4xXSxzW24rMV09MDtyZXR1cm4gc31jb21wbGV0ZVNwZWN0cnVtKHQpe2Zvcih2YXIgZT10aGlzLl9jc2l6ZSxzPWU+Pj4xLG49MjtuPHM7bis9Mil0W2Utbl09dFtuXSx0W2UtbisxXT0tdFtuKzFdfXRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3RyYW5zZm9ybTQoKSx0aGlzLl9vdXQ9bnVsbCx0aGlzLl9kYXRhPW51bGx9cmVhbFRyYW5zZm9ybSh0LGUpe2lmKHQ9PT1lKXRocm93IG5ldyBFcnJvcigiSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Iik7dGhpcy5fb3V0PXQsdGhpcy5fZGF0YT1lLHRoaXMuX2ludj0wLHRoaXMuX3JlYWxUcmFuc2Zvcm00KCksdGhpcy5fb3V0PW51bGwsdGhpcy5fZGF0YT1udWxsfWludmVyc2VUcmFuc2Zvcm0odCxlKXtpZih0PT09ZSl0aHJvdyBuZXcgRXJyb3IoIklucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCIpO3RoaXMuX291dD10LHRoaXMuX2RhdGE9ZSx0aGlzLl9pbnY9MSx0aGlzLl90cmFuc2Zvcm00KCk7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdFtzXS89dGhpcy5zaXplO3RoaXMuX291dD1udWxsLHRoaXMuX2RhdGE9bnVsbH1fdHJhbnNmb3JtNCgpe3ZhciB0PXRoaXMuX291dCxlPXRoaXMuX2NzaXplLHM9dGhpcy5fd2lkdGgsbj0xPDxzLG89ZS9uPDwxLGksYSx1PXRoaXMuX2JpdHJldjtpZihvPT09NClmb3IoaT0wLGE9MDtpPGU7aSs9byxhKyspe2NvbnN0IG09dVthXTt0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKGksbSxuKX1lbHNlIGZvcihpPTAsYT0wO2k8ZTtpKz1vLGErKyl7Y29uc3QgbT11W2FdO3RoaXMuX3NpbmdsZVRyYW5zZm9ybTQoaSxtLG4pfXZhciBjPXRoaXMuX2ludj8tMToxLGg9dGhpcy50YWJsZTtmb3Iobj4+PTI7bj49MjtuPj49Mil7bz1lL248PDE7dmFyIGY9bz4+PjI7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIGQ9aStmLGw9aSxwPTA7bDxkO2wrPTIscCs9bil7Y29uc3QgbT1sLEk9bStmLGc9SStmLHY9ZytmLFQ9dFttXSxQPXRbbSsxXSxNPXRbSV0seD10W0krMV0sUz10W2ddLHk9dFtnKzFdLFY9dFt2XSxBPXRbdisxXSxZPVQsTz1QLEQ9aFtwXSxOPWMqaFtwKzFdLEY9TSpELXgqTix6PU0qTit4KkQsSD1oWzIqcF0sQz1jKmhbMipwKzFdLGl0PVMqSC15KkMsb3Q9UypDK3kqSCxhdD1oWzMqcF0sY3Q9YypoWzMqcCsxXSx1dD1WKmF0LUEqY3QsaHQ9VipjdCtBKmF0LGx0PVkraXQsSj1PK290LFg9WS1pdCxmdD1PLW90LGR0PUYrdXQsdHQ9eitodCxldD1jKihGLXV0KSxwdD1jKih6LWh0KSxtdD1sdCtkdCxCdD1KK3R0LFR0PWx0LWR0LFB0PUotdHQsTXQ9WCtwdCxTdD1mdC1ldCx4dD1YLXB0LHl0PWZ0K2V0O3RbbV09bXQsdFttKzFdPUJ0LHRbSV09TXQsdFtJKzFdPVN0LHRbZ109VHQsdFtnKzFdPVB0LHRbdl09eHQsdFt2KzFdPXl0fX19X3NpbmdsZVRyYW5zZm9ybTIodCxlLHMpe2NvbnN0IG49dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPW9bZV0sYT1vW2UrMV0sdT1vW2Urc10sYz1vW2UrcysxXSxoPWkrdSxmPWErYyxkPWktdSxsPWEtYztuW3RdPWgsblt0KzFdPWYsblt0KzJdPWQsblt0KzNdPWx9X3NpbmdsZVRyYW5zZm9ybTQodCxlLHMpe2NvbnN0IG49dGhpcy5fb3V0LG89dGhpcy5fZGF0YSxpPXRoaXMuX2ludj8tMToxLGE9cyoyLHU9cyozLGM9b1tlXSxoPW9bZSsxXSxmPW9bZStzXSxkPW9bZStzKzFdLGw9b1tlK2FdLHA9b1tlK2ErMV0sbT1vW2UrdV0sST1vW2UrdSsxXSxnPWMrbCx2PWgrcCxUPWMtbCxQPWgtcCxNPWYrbSx4PWQrSSxTPWkqKGYtbSkseT1pKihkLUkpLFY9ZytNLEE9dit4LFk9VCt5LE89UC1TLEQ9Zy1NLE49di14LEY9VC15LHo9UCtTO25bdF09VixuW3QrMV09QSxuW3QrMl09WSxuW3QrM109TyxuW3QrNF09RCxuW3QrNV09TixuW3QrNl09RixuW3QrN109en1fcmVhbFRyYW5zZm9ybTQoKXt2YXIgdD10aGlzLl9vdXQsZT10aGlzLl9jc2l6ZSxzPXRoaXMuX3dpZHRoLG49MTw8cyxvPWUvbjw8MSxpLGEsdT10aGlzLl9iaXRyZXY7aWYobz09PTQpZm9yKGk9MCxhPTA7aTxlO2krPW8sYSsrKXtjb25zdCBWdD11W2FdO3RoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm0yKGksVnQ+Pj4xLG4+Pj4xKX1lbHNlIGZvcihpPTAsYT0wO2k8ZTtpKz1vLGErKyl7Y29uc3QgVnQ9dVthXTt0aGlzLl9zaW5nbGVSZWFsVHJhbnNmb3JtNChpLFZ0Pj4+MSxuPj4+MSl9dmFyIGM9dGhpcy5faW52Py0xOjEsaD10aGlzLnRhYmxlO2ZvcihuPj49MjtuPj0yO24+Pj0yKXtvPWUvbjw8MTt2YXIgZj1vPj4+MSxkPWY+Pj4xLGw9ZD4+PjE7Zm9yKGk9MDtpPGU7aSs9bylmb3IodmFyIHA9MCxtPTA7cDw9bDtwKz0yLG0rPW4pe3ZhciBJPWkrcCxnPUkrZCx2PWcrZCxUPXYrZCxQPXRbSV0sTT10W0krMV0seD10W2ddLFM9dFtnKzFdLHk9dFt2XSxWPXRbdisxXSxBPXRbVF0sWT10W1QrMV0sTz1QLEQ9TSxOPWhbbV0sRj1jKmhbbSsxXSx6PXgqTi1TKkYsSD14KkYrUypOLEM9aFsyKm1dLGl0PWMqaFsyKm0rMV0sb3Q9eSpDLVYqaXQsYXQ9eSppdCtWKkMsY3Q9aFszKm1dLHV0PWMqaFszKm0rMV0saHQ9QSpjdC1ZKnV0LGx0PUEqdXQrWSpjdCxKPU8rb3QsWD1EK2F0LGZ0PU8tb3QsZHQ9RC1hdCx0dD16K2h0LGV0PUgrbHQscHQ9Yyooei1odCksbXQ9YyooSC1sdCksQnQ9Sit0dCxUdD1YK2V0LFB0PWZ0K210LE10PWR0LXB0O2lmKHRbSV09QnQsdFtJKzFdPVR0LHRbZ109UHQsdFtnKzFdPU10LHA9PT0wKXt2YXIgU3Q9Si10dCx4dD1YLWV0O3Rbdl09U3QsdFt2KzFdPXh0O2NvbnRpbnVlfWlmKHAhPT1sKXt2YXIgeXQ9ZnQsQmU9LWR0LFRlPUosUGU9LVgsTWU9LWMqbXQsU2U9LWMqcHQseGU9LWMqZXQseWU9LWMqdHQsVmU9eXQrTWUsQWU9QmUrU2UsT2U9VGUreWUsTmU9UGUteGUsV3Q9aStkLXAscXQ9aStmLXA7dFtXdF09VmUsdFtXdCsxXT1BZSx0W3F0XT1PZSx0W3F0KzFdPU5lfX19fV9zaW5nbGVSZWFsVHJhbnNmb3JtMih0LGUscyl7Y29uc3Qgbj10aGlzLl9vdXQsbz10aGlzLl9kYXRhLGk9b1tlXSxhPW9bZStzXSx1PWkrYSxjPWktYTtuW3RdPXUsblt0KzFdPTAsblt0KzJdPWMsblt0KzNdPTB9X3NpbmdsZVJlYWxUcmFuc2Zvcm00KHQsZSxzKXtjb25zdCBuPXRoaXMuX291dCxvPXRoaXMuX2RhdGEsaT10aGlzLl9pbnY/LTE6MSxhPXMqMix1PXMqMyxjPW9bZV0saD1vW2Urc10sZj1vW2UrYV0sZD1vW2UrdV0sbD1jK2YscD1jLWYsbT1oK2QsST1pKihoLWQpLGc9bCttLHY9cCxUPS1JLFA9bC1tLE09cCx4PUk7blt0XT1nLG5bdCsxXT0wLG5bdCsyXT12LG5bdCszXT1ULG5bdCs0XT1QLG5bdCs1XT0wLG5bdCs2XT1NLG5bdCs3XT14fX1sZXQgWXQ9cj0+Y29uc29sZS5sb2cocik7Y29uc3QganQ9KC4uLnIpPT5ZdCguLi5yKSxIdD0ocix0LGUpPT5NYXRoLm1pbihNYXRoLm1heChyLHQpLGUpLE90PXI9PnIvKDErciksR3Q9KHIsdCk9PihyJXQrdCkldCxLdD0ocix0KT0+KDErdCkqci8oMSt0Kk1hdGguYWJzKHIpKSxLPShyLHQpPT5NYXRoLnRhbmgociooMSt0KSksVXQ9KHIsdCk9Pkh0KCgxK3QpKnIsLTEsMSksTnQ9KHIsdCk9PntsZXQgZT0oMSsuNSp0KSpyO2NvbnN0IHM9R3QoZSsxLDQpO3JldHVybiAxLU1hdGguYWJzKHMtMil9LFp0PShyLHQpPT5NYXRoLnNpbihNYXRoLlBJLzIqTnQocix0KSksJHQ9KHIsdCk9Pntjb25zdCBlPU90KE1hdGgubG9nMXAodCkpLHM9KHItZS8zKnIqcipyKS8oMS1lLzMpO3JldHVybiBLKHMsdCl9LEZ0PShyLHQsZT0hMSk9Pntjb25zdCBzPTErMip0LG89LjA3Kk90KE1hdGgubG9nMXAodCkpLGk9SyhyK28sMip0KSxhPUsoZT9vOi1yK28sMip0KSx1PWktYSxjPTEvTWF0aC5jb3NoKHMqbyksaD1jKmMsZj1NYXRoLm1heCgxZS04LChlPzE6MikqcypoKTtyZXR1cm4gSyh1L2YsdCl9LEN0PXtzY3VydmU6S3Qsc29mdDpLLGhhcmQ6VXQsY3ViaWM6JHQsZGlvZGU6RnQsYXN5bToocix0KT0+RnQocix0LCEwKSxmb2xkOk50LHNpbmVmb2xkOlp0LGNoZWJ5c2hldjoocix0KT0+e2NvbnN0IGU9MTAqTWF0aC5sb2cxcCh0KTtsZXQgcz0xLG49cixvLGk9MDtmb3IobGV0IGE9MTthPDY0O2ErKyl7aWYoYTwyKXtpKz1hPT0wP3M6bjtjb250aW51ZX1vPTIqcipzLW4sbj1zLHM9byxhJTI9PT0wJiYoaSs9TWF0aC5taW4oMS4zKmUvYSwyKSpvKX1yZXR1cm4gSyhpLGUvMjApfX0sc3Q9T2JqZWN0LmZyZWV6ZShPYmplY3Qua2V5cyhDdCkpLFF0PXI9PntsZXQgdD1yO3R5cGVvZiByPT0ic3RyaW5nIiYmKHQ9c3QuaW5kZXhPZihyKSx0PT09LTEmJihqdChgW3N1cGVyZG91Z2hdIENvdWxkIG5vdCBmaW5kIHdhdmVzaGFwaW5nIGFsZ29yaXRobSAke3J9LgogICAgICAgIEF2YWlsYWJsZSBvcHRpb25zIGFyZSAke3N0LmpvaW4oIiwgIil9LgogICAgICAgIERlZmF1bHRpbmcgdG8gJHtzdFswXX0uYCksdD0wKSk7Y29uc3QgZT1zdFt0JXN0Lmxlbmd0aF07cmV0dXJuIEN0W2VdfSxqPTEyOCxFPU1hdGguUEksUj0yKkUscT0xL3NhbXBsZVJhdGUsdnQ9cj0+MS1NYXRoLmV4cCgtcS9yKSxrdD1yPT5NYXRoLnBvdygxMCxyLzIwKSx3PShyLHQsZSk9Pk1hdGgubWluKE1hdGgubWF4KHIsdCksZSksbnQ9KHIsdCxlKT0+ZSoodC1yKStyLGI9KHIsdCk9PnJbdF0/P3JbMF0sVT1yPT5yLU1hdGguZmxvb3IociksWj1yPT5yfDAsJD1yPT5aKHIrLjUpLEp0PXI9PloocisxKSxFdD1yPT5yLVoociksTD1yPT57Y29uc3QgdD1yKioyO3JldHVybiByKigyNyt0KS8oMjcrOSp0KX0sUnQ9KHIsdCk9PntpZihyPDIpcmV0dXJuIG49PjA7Y29uc3QgZT10LyhyLTEpLHM9dCouNTtyZXR1cm4gbj0+biplLXN9LFE9KHIsdCk9PnIqTWF0aC5wb3coMix0LzEyKTtmdW5jdGlvbiBYdChyLHQpe3Q9TWF0aC5taW4odCwxLXQpO2NvbnN0IGU9MS90O3JldHVybiByPHQ/KHIqPWUsMipyLXIqKjItMSk6cj4xLXQ/KHI9KHItMSkqZSxyKioyKzIqcisxKTowfWNvbnN0IGd0PXt0cmkocix0PS41KXtjb25zdCBlPTEtdDtyZXR1cm4gcj49dD8xL2Utci9lOnIvdH0sc2luZShyKXtyZXR1cm4gTWF0aC5zaW4oUipyKSouNSsuNX0scmFtcChyKXtyZXR1cm4gcn0sc2F3KHIpe3JldHVybiAxLXJ9LHNxdWFyZShyLHQ9LjUpe3JldHVybiByPj10PzA6MX0sY3VzdG9tKHIsdD1bMCwxXSl7Y29uc3QgZT10Lmxlbmd0aC0xLHM9TWF0aC5mbG9vcihyKmUpLG49MS9lLG89dyh0W3NdLDAsMSksYT13KHRbcysxXSwwLDEpLHU9byxjPTAsaD1uO3JldHVybihhLXUpLyhoLWMpKihyLW4qcykrb30sc2F3YmxlcChyLHQpe3JldHVybiAyKnItMS1YdChyLHQpfX0sdGU9T2JqZWN0LmtleXMoZ3QpO2NsYXNzIGVlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InRpbWUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MH0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToic2tldyIsZGVmYXVsdFZhbHVlOi41fSx7bmFtZToiZGVwdGgiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToicGhhc2VvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToic2hhcGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiY3VydmUiLGRlZmF1bHRWYWx1ZToxfSx7bmFtZToiZGNvZmZzZXQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToibWluIixkZWZhdWx0VmFsdWU6MH0se25hbWU6Im1heCIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5waGFzZX1pbmNyZW1lbnRQaGFzZSh0KXt0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2U9dGhpcy5waGFzZS0xKX1wcm9jZXNzKHQsZSxzKXtjb25zdCBuPXMuYmVnaW5bMF07aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1uKXJldHVybiEwO2NvbnN0IG89ZVswXSxpPXMuZnJlcXVlbmN5WzBdLGE9cy50aW1lWzBdLHU9cy5kZXB0aFswXSxjPXMuc2tld1swXSxoPXMucGhhc2VvZmZzZXRbMF0sZj1zLmN1cnZlWzBdLGQ9cy5kY29mZnNldFswXSxsPXMubWluWzBdLHA9cy5tYXhbMF0sbT10ZVtzLnNoYXBlWzBdXSxJPW9bMF0ubGVuZ3RoPz8wO3RoaXMucGhhc2U9PW51bGwmJih0aGlzLnBoYXNlPUV0KGEqaStoKSk7Y29uc3QgZz1pKnE7Zm9yKGxldCB2PTA7djxJO3YrKyl7Zm9yKGxldCBUPTA7VDxvLmxlbmd0aDtUKyspe2xldCBQPShndFttXSh0aGlzLnBoYXNlLGMpK2QpKnU7UD1NYXRoLnBvdyhQLGYpLG9bVF1bdl09dyhQLGwscCl9dGhpcy5pbmNyZW1lbnRQaGFzZShnKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImxmby1wcm9jZXNzb3IiLGVlKTtjbGFzcyBzZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJjb2Fyc2UiLGRlZmF1bHRWYWx1ZToxfV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuc3RhcnRlZD0hMX1wcm9jZXNzKHQsZSxzKXtjb25zdCBuPXRbMF0sbz1lWzBdLGk9blswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2xldCBhPXMuY29hcnNlWzBdPz8wO2E9TWF0aC5tYXgoMSxhKTtmb3IobGV0IHU9MDt1PGo7dSsrKWZvcihsZXQgYz0wO2M8bi5sZW5ndGg7YysrKW9bY11bdV09dSVhPT09MD9uW2NdW3VdOm9bY11bdS0xXTtyZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImNvYXJzZS1wcm9jZXNzb3IiLHNlKTtjbGFzcyBuZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJjcnVzaCIsZGVmYXVsdFZhbHVlOjB9XX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5zdGFydGVkPSExfXByb2Nlc3ModCxlLHMpe2NvbnN0IG49dFswXSxvPWVbMF0saT1uWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWkpcmV0dXJuITE7dGhpcy5zdGFydGVkPWk7bGV0IGE9cy5jcnVzaFswXT8/ODthPU1hdGgubWF4KDEsYSk7Zm9yKGxldCB1PTA7dTxqO3UrKylmb3IobGV0IGM9MDtjPG4ubGVuZ3RoO2MrKyl7Y29uc3QgaD1NYXRoLnBvdygyLGEtMSk7b1tjXVt1XT1NYXRoLnJvdW5kKG5bY11bdV0qaCkvaH1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImNydXNoLXByb2Nlc3NvciIsbmUpO2NsYXNzIHJlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6InNoYXBlIixkZWZhdWx0VmFsdWU6MH0se25hbWU6InBvc3RnYWluIixkZWZhdWx0VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITF9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgbj10WzBdLG89ZVswXSxpPW5bMF0hPT12b2lkIDA7aWYodGhpcy5zdGFydGVkJiYhaSlyZXR1cm4hMTt0aGlzLnN0YXJ0ZWQ9aTtsZXQgYT1zLnNoYXBlWzBdO2E9YTwxP2E6Ljk5OTk5OTk5OTYsYT0yKmEvKDEtYSk7Y29uc3QgdT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEscy5wb3N0Z2FpblswXSkpO2ZvcihsZXQgYz0wO2M8ajtjKyspZm9yKGxldCBoPTA7aDxuLmxlbmd0aDtoKyspb1toXVtjXT0oMSthKSpuW2hdW2NdLygxK2EqTWF0aC5hYnMobltoXVtjXSkpKnU7cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzaGFwZS1wcm9jZXNzb3IiLHJlKTtjbGFzcyBEdHtjb25zdHJ1Y3Rvcigpe0F0KHRoaXMsInMwIiwwKTtBdCh0aGlzLCJzMSIsMCl9dXBkYXRlKHQsZSxzPTApe3M9dyhzLDAsMSksZT13KGUsMCxzYW1wbGVSYXRlLzItMSk7Y29uc3Qgbj13KDIqTWF0aC5zaW4oZSpFKnEpLDAsMS4xNCksaT0xLU1hdGgucG93KC41LDgqcysxKSpuO3JldHVybiB0aGlzLnMwPWkqdGhpcy5zMC1uKnRoaXMuczErbip0LHRoaXMuczE9aSp0aGlzLnMxK24qdGhpcy5zMCx0aGlzLnMxfX1jbGFzcyBpZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJ2YWx1ZSIsZGVmYXVsdFZhbHVlOi41fV19Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZmlsdGVycz1bbmV3IER0LG5ldyBEdF19cHJvY2Vzcyh0LGUscyl7Y29uc3Qgbj10WzBdLG89ZVswXSxpPW5bMF0hPT12b2lkIDA7dGhpcy5zdGFydGVkPWk7Y29uc3QgYT13KHMudmFsdWVbMF0sMCwxKTtsZXQgdT0ibm9uZSIsYyxoPTE7YT4uNTE/KHU9ImhpcGFzcyIsaD0oYS0uNSkqMik6YTwuNDkmJih1PSJsb3Bhc3MiLGg9YSoyKSxjPU1hdGgucG93KGgqMTEsNCk7Zm9yKGxldCBmPTA7ZjxuLmxlbmd0aDtmKyspZm9yKGxldCBkPTA7ZDxqO2QrKyl1PT0ibm9uZSI/b1tmXVtkXT1uW2ZdW2RdOih0aGlzLmZpbHRlcnNbZl0udXBkYXRlKG5bZl1bZF0sYywuMSksdT09PSJsb3Bhc3MiP29bZl1bZF09dGhpcy5maWx0ZXJzW2ZdLnMxOnU9PT0iaGlwYXNzIj9vW2ZdW2RdPW5bZl1bZF0tdGhpcy5maWx0ZXJzW2ZdLnMxOm9bZl1bZF09bltmXVtkXSk7cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJkamYtcHJvY2Vzc29yIixpZSk7Y2xhc3Mgb2UgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NTAwfSx7bmFtZToicSIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJkcml2ZSIsZGVmYXVsdFZhbHVlOi42OX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5wMD1bMCwwXSx0aGlzLnAxPVswLDBdLHRoaXMucDI9WzAsMF0sdGhpcy5wMz1bMCwwXSx0aGlzLnAzMj1bMCwwXSx0aGlzLnAzMz1bMCwwXSx0aGlzLnAzND1bMCwwXX1wcm9jZXNzKHQsZSxzKXtjb25zdCBuPXRbMF0sbz1lWzBdLGk9blswXSE9PXZvaWQgMDtpZih0aGlzLnN0YXJ0ZWQmJiFpKXJldHVybiExO3RoaXMuc3RhcnRlZD1pO2NvbnN0IGE9cy5xWzBdLHU9dyhNYXRoLmV4cChzLmRyaXZlWzBdKSwuMSwyZTMpO2xldCBjPXMuZnJlcXVlbmN5WzBdO2M9YypSKnEsYz1jPjE/MTpjO2NvbnN0IGg9TWF0aC5taW4oOCxhKi4xMyk7bGV0IGY9MS91Kk1hdGgubWluKDEuNzUsMStoKTtmb3IobGV0IGQ9MDtkPGo7ZCsrKWZvcihsZXQgbD0wO2w8bi5sZW5ndGg7bCsrKXtjb25zdCBwPXRoaXMucDNbbF0qLjM2MDg5MSt0aGlzLnAzMltsXSouNDE3MjkrdGhpcy5wMzNbbF0qLjE3Nzg5Nit0aGlzLnAzNFtsXSouMDQzOTcyNTt0aGlzLnAzNFtsXT10aGlzLnAzM1tsXSx0aGlzLnAzM1tsXT10aGlzLnAzMltsXSx0aGlzLnAzMltsXT10aGlzLnAzW2xdLHRoaXMucDBbbF0rPShMKG5bbF1bZF0qdS1oKnApLUwodGhpcy5wMFtsXSkpKmMsdGhpcy5wMVtsXSs9KEwodGhpcy5wMFtsXSktTCh0aGlzLnAxW2xdKSkqYyx0aGlzLnAyW2xdKz0oTCh0aGlzLnAxW2xdKS1MKHRoaXMucDJbbF0pKSpjLHRoaXMucDNbbF0rPShMKHRoaXMucDJbbF0pLUwodGhpcy5wM1tsXSkpKmMsb1tsXVtkXT1wKmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJsYWRkZXItcHJvY2Vzc29yIixvZSk7Y2xhc3MgYWUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7c3RhdGljIGdldCBwYXJhbWV0ZXJEZXNjcmlwdG9ycygpe3JldHVyblt7bmFtZToiZGlzdG9ydCIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJwb3N0Z2FpbiIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih7cHJvY2Vzc29yT3B0aW9uczp0fSl7c3VwZXIoKSx0aGlzLnN0YXJ0ZWQ9ITEsdGhpcy5hbGdvcml0aG09UXQodC5hbGdvcml0aG0pfXByb2Nlc3ModCxlLHMpe2NvbnN0IG49dFswXSxvPWVbMF0saT1uWzBdIT09dm9pZCAwO2lmKHRoaXMuc3RhcnRlZCYmIWkpcmV0dXJuITE7dGhpcy5zdGFydGVkPWk7Zm9yKGxldCBhPTA7YTxqO2ErKyl7Y29uc3QgdT13KGIocy5wb3N0Z2FpbixhKSwuMDAxLDEpLGM9TWF0aC5leHBtMShiKHMuZGlzdG9ydCxhKSk7Zm9yKGxldCBoPTA7aDxuLmxlbmd0aDtoKyspe2NvbnN0IGY9bltoXVthXTtvW2hdW2FdPXUqdGhpcy5hbGdvcml0aG0oZixjKX19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJkaXN0b3J0LXByb2Nlc3NvciIsYWUpO2NsYXNzIGNlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnBoYXNlPVtdfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi40LG1pbjowLG1heDoxfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4yLG1pbjowfSx7bmFtZToiZGV0dW5lIixkZWZhdWx0VmFsdWU6MCxtaW46MH0se25hbWU6InZvaWNlcyIsZGVmYXVsdFZhbHVlOjUsbWluOjEsYXV0b21hdGlvblJhdGU6ImstcmF0ZSJ9XX1wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7Y29uc3Qgbj1lWzBdLG89cy52b2ljZXNbMF07Zm9yKGxldCBpPTA7aTxuWzBdLmxlbmd0aDtpKyspe2NvbnN0IGE9YihzLmRldHVuZSxpKSx1PWIocy5mcmVxc3ByZWFkLGkpLGM9YihzLnBhbnNwcmVhZCxpKSouNSsuNTtsZXQgaD1NYXRoLnNxcnQoMS1jKSxmPU1hdGguc3FydChjKSxkPWIocy5mcmVxdWVuY3ksaSk7ZD1RKGQsYS8xMDApO2NvbnN0IGw9UnQobyx1KTtmb3IobGV0IHA9MDtwPG87cCsrKXtjb25zdCBtPVEoZCxsKHApKSxJPVUobSpxKTt0aGlzLnBoYXNlW3BdPXRoaXMucGhhc2VbcF0/P01hdGgucmFuZG9tKCk7Y29uc3QgZz1ndC5zYXdibGVwKHRoaXMucGhhc2VbcF0sSSk7blswXVtpXSs9ZypoLG5bMV1baV0rPWcqZjtsZXQgdj10aGlzLnBoYXNlW3BdK0k7dj49MSYmKHYtPTEpLHRoaXMucGhhc2VbcF09djtjb25zdCBUPWg7aD1mLGY9VH19cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJzdXBlcnNhdy1vc2NpbGxhdG9yIixjZSk7Y29uc3QgdWU9MjA0OCxidD1uZXcgTWFwO2Z1bmN0aW9uIGhlKHIpe2lmKCFidC5oYXMocikpe2NvbnN0IHQ9bmV3IEZsb2F0MzJBcnJheShyKTtmb3IobGV0IGU9MDtlPHI7ZSsrKXRbZV09LjUqKDEtTWF0aC5jb3MoUiplL3IpKTtidC5zZXQocix0KX1yZXR1cm4gYnQuZ2V0KHIpfWNsYXNzIGxlIGV4dGVuZHMgR3tzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJwaXRjaEZhY3RvciIsZGVmYXVsdFZhbHVlOjF9XX1jb25zdHJ1Y3Rvcih0KXt0LnByb2Nlc3Nvck9wdGlvbnM9e2Jsb2NrU2l6ZTp1ZX0sc3VwZXIodCksdGhpcy50aW1lQ3Vyc29yPTAsdGhpcy5mZnRTaXplPXRoaXMuYmxvY2tTaXplLHRoaXMuaW52ZmZ0U2l6ZT0xL3RoaXMuZmZ0U2l6ZSx0aGlzLmhhbm5XaW5kb3c9aGUodGhpcy5mZnRTaXplKSx0aGlzLmZmdD1uZXcgTHQodGhpcy5mZnRTaXplKSx0aGlzLmZyZXFDb21wbGV4QnVmZmVyPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkPXRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpLHRoaXMudGltZUNvbXBsZXhCdWZmZXI9dGhpcy5mZnQuY3JlYXRlQ29tcGxleEFycmF5KCksdGhpcy5tYWduaXR1ZGVzPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5mZnRTaXplLzIrMSksdGhpcy5wZWFrSW5kZXhlcz1uZXcgSW50MzJBcnJheSh0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSx0aGlzLm5iUGVha3M9MH1wcm9jZXNzT0xBKHQsZSxzKXtsZXQgbj1zLnBpdGNoRmFjdG9yW3MucGl0Y2hGYWN0b3IubGVuZ3RoLTFdO248MCYmKG49biouMjUpLG49TWF0aC5tYXgoMCxuKzEpO2ZvcihsZXQgbz0wO288dGhpcy5uYklucHV0cztvKyspZm9yKGxldCBpPTA7aTx0W29dLmxlbmd0aDtpKyspe2NvbnN0IGE9dFtvXVtpXSx1PWVbb11baV07dGhpcy5hcHBseUhhbm5XaW5kb3coYSksdGhpcy5mZnQucmVhbFRyYW5zZm9ybSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyLGEpLHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKSx0aGlzLmZpbmRQZWFrcygpLHRoaXMuc2hpZnRQZWFrcyhuKSx0aGlzLmZmdC5jb21wbGV0ZVNwZWN0cnVtKHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkKSx0aGlzLmZmdC5pbnZlcnNlVHJhbnNmb3JtKHRoaXMudGltZUNvbXBsZXhCdWZmZXIsdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQpLHRoaXMuZmZ0LmZyb21Db21wbGV4QXJyYXkodGhpcy50aW1lQ29tcGxleEJ1ZmZlcix1KSx0aGlzLmFwcGx5SGFubldpbmRvdyh1KX10aGlzLnRpbWVDdXJzb3IrPXRoaXMuaG9wU2l6ZX1hcHBseUhhbm5XaW5kb3codCl7Zm9yKGxldCBlPTA7ZTx0aGlzLmJsb2NrU2l6ZTtlKyspdFtlXSo9dGhpcy5oYW5uV2luZG93W2VdKjEuNjJ9Y29tcHV0ZU1hZ25pdHVkZXMoKXtsZXQgdD0wLGU9MDtmb3IoO3Q8dGhpcy5tYWduaXR1ZGVzLmxlbmd0aDspe2NvbnN0IHM9dGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltlXSxuPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbZSsxXTt0aGlzLm1hZ25pdHVkZXNbdF09cyoqMituKioyLHQrPTEsZSs9Mn19ZmluZFBlYWtzKCl7dGhpcy5uYlBlYWtzPTA7bGV0IHQ9Mjtjb25zdCBlPXRoaXMubWFnbml0dWRlcy5sZW5ndGgtMjtmb3IoO3Q8ZTspe2NvbnN0IHM9dGhpcy5tYWduaXR1ZGVzW3RdO2lmKHRoaXMubWFnbml0dWRlc1t0LTFdPj1zfHx0aGlzLm1hZ25pdHVkZXNbdC0yXT49cyl7dCsrO2NvbnRpbnVlfWlmKHRoaXMubWFnbml0dWRlc1t0KzFdPj1zfHx0aGlzLm1hZ25pdHVkZXNbdCsyXT49cyl7dCsrO2NvbnRpbnVlfXRoaXMucGVha0luZGV4ZXNbdGhpcy5uYlBlYWtzXT10LHRoaXMubmJQZWFrcysrLHQrPTJ9fXNoaWZ0UGVha3ModCl7dGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTtmb3IobGV0IGU9MDtlPHRoaXMubmJQZWFrcztlKyspe2NvbnN0IHM9dGhpcy5wZWFrSW5kZXhlc1tlXSxuPSQocyp0KTtpZihuPnRoaXMubWFnbml0dWRlcy5sZW5ndGgpYnJlYWs7bGV0IG89MCxpPXRoaXMuZmZ0U2l6ZTtlPjAmJihvPXMtJCgocy10aGlzLnBlYWtJbmRleGVzW2UtMV0pLzIpKSxlPHRoaXMubmJQZWFrcy0xJiYoaT1zK0p0KCh0aGlzLnBlYWtJbmRleGVzW2UrMV0tcykvMikpO2NvbnN0IGE9by1zLHU9aS1zLGM9Uip0aGlzLmludmZmdFNpemUqKG4tcyksaD1NYXRoLmNvcyhjKnRoaXMudGltZUN1cnNvciksZj1NYXRoLnNpbihjKnRoaXMudGltZUN1cnNvcik7Zm9yKGxldCBkPWE7ZDx1O2QrKyl7Y29uc3QgbD1zK2QscD1uK2Q7aWYocD49dGhpcy5tYWduaXR1ZGVzLmxlbmd0aClicmVhaztjb25zdCBtPTIqbCxJPW0rMSxnPXRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbbV0sdj10aGlzLmZyZXFDb21wbGV4QnVmZmVyW0ldLFQ9ZypoLXYqZixQPWcqZit2KmgsTT0yKnAseD1NKzE7dGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbTV0rPVQsdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWRbeF0rPVB9fX19cmVnaXN0ZXJQcm9jZXNzb3IoInBoYXNlLXZvY29kZXItcHJvY2Vzc29yIixsZSk7Y2xhc3MgZmUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucGhpPS1FLHRoaXMuWTA9MCx0aGlzLlkxPTAsdGhpcy5QVz1FLHRoaXMuQj0yLjMsdGhpcy5kcGhpZj0wLHRoaXMuZW52Zj0wfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOk51bWJlci5ORUdBVElWRV9JTkZJTklUWSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToicHVsc2V3aWR0aCIsZGVmYXVsdFZhbHVlOjEsbWluOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX1dfXByb2Nlc3ModCxlLHMpe2lmKHRoaXMuZGlzY29ubmVjdGVkKXJldHVybiExO2lmKGN1cnJlbnRUaW1lPD1zLmJlZ2luWzBdKXJldHVybiEwO2lmKGN1cnJlbnRUaW1lPj1zLmVuZFswXSlyZXR1cm4hMTtjb25zdCBuPWVbMF07bGV0IG89MSxpO2ZvcihsZXQgYT0wO2E8KG5bMF0ubGVuZ3RoPz8wKTthKyspe2NvbnN0IHU9KDEtdyhiKHMucHVsc2V3aWR0aCxhKSwtLjk5LC45OSkpKkUsYz1iKHMuZGV0dW5lLGEpLGg9UShiKHMuZnJlcXVlbmN5LGEpLGMvMTAwKTtpPWgqUipxLHRoaXMuZHBoaWYrPS4xKihpLXRoaXMuZHBoaWYpLG8qPS45OTk4LHRoaXMuZW52Zis9LjEqKG8tdGhpcy5lbnZmKSx0aGlzLkI9Mi4zKigxLTFlLTQqaCksdGhpcy5CPDAmJih0aGlzLkI9MCksdGhpcy5waGkrPXRoaXMuZHBoaWYsdGhpcy5waGk+PUUmJih0aGlzLnBoaS09Uik7bGV0IGY9TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTApO3RoaXMuWTA9LjUqKGYrdGhpcy5ZMCk7bGV0IGQ9TWF0aC5jb3ModGhpcy5waGkrdGhpcy5CKnRoaXMuWTErdSk7dGhpcy5ZMT0uNSooZCt0aGlzLlkxKTtmb3IobGV0IGw9MDtsPG4ubGVuZ3RoO2wrKyluW2xdW2FdPS4xNSooZi1kKSp0aGlzLmVudmZ9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJwdWxzZS1vc2NpbGxhdG9yIixmZSk7Y29uc3QgSXQ9e2JpdEM6ZnVuY3Rpb24ocix0LGUpe3JldHVybiByJnQ/ZTowfSxicjpmdW5jdGlvbihyLHQ9OCl7aWYodD4zMil0aHJvdyBuZXcgRXJyb3IoImJyKCkgU2l6ZSBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIDMyIik7bGV0IGU9MDtmb3IobGV0IHM9MDtzPHQ7cysrKWV8PUl0LmJpdEMociwxPDxzLDE8PHQtKHMrMSkpO3JldHVybiBlfSxzaW5mOmZ1bmN0aW9uKHIpe3JldHVybiBNYXRoLnNpbihyKkUvMTI4KX0sY29zZjpmdW5jdGlvbihyKXtyZXR1cm4gTWF0aC5jb3MocipFLzEyOCl9LHRhbmY6ZnVuY3Rpb24ocil7cmV0dXJuIE1hdGgudGFuKHIqRS8xMjgpfSxyZWdHOmZ1bmN0aW9uKHIsdCl7cmV0dXJuIHQudGVzdChyLnRvU3RyaW5nKDIpKX19O2xldCBydCxfdDtmdW5jdGlvbiBkZShyKXtpZihydD09bnVsbCl7cnQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTWF0aCksX3Q9cnQubWFwKHM9Pk1hdGhbc10pO2NvbnN0IHQ9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoSXQpLGU9dC5tYXAocz0+SXRbc10pO3J0LnB1c2goImludCIsIndpbmRvdyIsLi4udCksX3QucHVzaChNYXRoLmZsb29yLGdsb2JhbFRoaXMsLi4uZSl9cmV0dXJuIG5ldyBGdW5jdGlvbiguLi5ydCwidCIsYHJldHVybiAwLAoke3J8fDB9O2ApLmJpbmQoZ2xvYmFsVGhpcywuLi5fdCl9Y2xhc3MgcGUgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMucG9ydC5vbm1lc3NhZ2U9dD0+e2xldHtjb2RlVGV4dDplfT10LmRhdGE7Y29uc3R7Ynl0ZUJlYXRTdGFydFRpbWU6c309dC5kYXRhO3MhPW51bGwmJih0aGlzLnQ9MCx0aGlzLmluaXRpYWxPZmZzZXQ9TWF0aC5mbG9vcihzKSksZT1lLnRyaW0oKS5yZXBsYWNlKC9eZXZhbFwodW5lc2NhcGVcKGVzY2FwZSg/OmB8XCgnfFwoInxcKGApKC4qPykoPzpgfCdcKXwiXCl8YFwpKS5yZXBsYWNlXChcL3VcKFwuXC5cKVwvZyxbIidgXVwkMSVbIidgXVwpXClcKSQvLChuLG8pPT51bmVzY2FwZShlc2NhcGUobykucmVwbGFjZSgvdSguLikvZywiJDElIikpKSx0aGlzLmZ1bmM9ZGUoZSl9LHRoaXMuaW5pdGlhbE9mZnNldD0wLHRoaXMudD1udWxsLHRoaXMuZnVuYz1udWxsfXN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5be25hbWU6ImJlZ2luIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfSx7bmFtZToiZnJlcXVlbmN5IixkZWZhdWx0VmFsdWU6NDQwLG1pbjpOdW1iZXIuRVBTSUxPTn0se25hbWU6ImRldHVuZSIsZGVmYXVsdFZhbHVlOjAsbWluOk51bWJlci5ORUdBVElWRV9JTkZJTklUWSxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZfSx7bmFtZToiZW5kIixkZWZhdWx0VmFsdWU6MCxtYXg6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG1pbjowfV19cHJvY2Vzcyh0LGUscyl7aWYodGhpcy5kaXNjb25uZWN0ZWQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7aWYoY3VycmVudFRpbWU+PXMuZW5kWzBdKXJldHVybiExO3RoaXMudD09bnVsbCYmKHRoaXMudD1zLmJlZ2luWzBdKnNhbXBsZVJhdGUpO2NvbnN0IG49ZVswXSxvPTI1NipxO2ZvcihsZXQgaT0wO2k8blswXS5sZW5ndGg7aSsrKXtjb25zdCBhPWIocy5kZXR1bmUsaSksdT1RKGIocy5mcmVxdWVuY3ksaSksYS8xMDApLGM9byp1KnRoaXMudCt0aGlzLmluaXRpYWxPZmZzZXQsZj0odGhpcy5mdW5jKGMpJjI1NSkvMTI3LjUtMSxkPXcoZiouMiwtLjQsLjQpO2ZvcihsZXQgbD0wO2w8bi5sZW5ndGg7bCsrKW5bbF1baV09ZDt0aGlzLnQrK31yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImJ5dGUtYmVhdC1wcm9jZXNzb3IiLHBlKTtjbGFzcyBtZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjB9LHtuYW1lOiJlbmQiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiYXR0YWNrIixkZWZhdWx0VmFsdWU6LjAwNSxtaW5WYWx1ZTowfSx7bmFtZToiZGVjYXkiLGRlZmF1bHRWYWx1ZTouMTQsbWluVmFsdWU6MH0se25hbWU6InN1c3RhaW4iLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOjAsbWF4VmFsdWU6MX0se25hbWU6InJlbGVhc2UiLGRlZmF1bHRWYWx1ZTouMSxtaW5WYWx1ZTowfSx7bmFtZToiYXR0YWNrQ3VydmUiLGRlZmF1bHRWYWx1ZTowLG1pblZhbHVlOi0xLG1heFZhbHVlOjF9LHtuYW1lOiJkZWNheUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToicmVsZWFzZUN1cnZlIixkZWZhdWx0VmFsdWU6MCxtaW5WYWx1ZTotMSxtYXhWYWx1ZToxfSx7bmFtZToicGVhayIsZGVmYXVsdFZhbHVlOjF9LHtuYW1lOiJyZXRyaWdnZXIiLGRlZmF1bHRWYWx1ZToxLG1pblZhbHVlOjAsbWF4VmFsdWU6MX1dfWNvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnZhbD0wLHRoaXMuc2VnSWR4PTAsdGhpcy5zdGF0ZT0wLHRoaXMuYmVnaW5UaW1lPTAsdGhpcy5lbmRUaW1lPTAsdGhpcy5hdHRhY2tTdGFydD0wfV93YXJwKHQsZSxzPTgpe2lmKHQ9PT0wfHx0PT09MSlyZXR1cm4gdDtpZihlPjApe2NvbnN0IG49MStzKmU7cmV0dXJuIDEtTWF0aC5wb3coMS10LG4pfWVsc2V7Y29uc3Qgbj0xLXMqZTtyZXR1cm4gTWF0aC5wb3codCxuKX19X2FkdmFuY2UodCxlLHMsbil7aWYocz09PTB8fHQ9PT1lKXRoaXMudmFsPWU7ZWxzZXtjb25zdCBvPU1hdGgubWluKDEsKGN1cnJlbnRUaW1lLXRoaXMuYmVnaW5UaW1lKS9zKSxpPXRoaXMuX3dhcnAobyxuKTt0aGlzLnZhbD10KyhlLXQpKml9fXByb2Nlc3ModCxlLHMpe2NvbnN0IG49ZVswXVswXTtpZighbilyZXR1cm4hMDtjb25zdCBvPWIocy5iZWdpbiwwKSxpPWIocy5yZXRyaWdnZXIsMCk+PS41O28hPT10aGlzLmJlZ2luVGltZSYmKHRoaXMuc3RhdGU9PT0wfHxpKSYmKHRoaXMuYmVnaW5UaW1lPW8sdGhpcy5zdGF0ZT0xLHRoaXMuZW5kVGltZT1iKHMuZW5kLDApLHRoaXMuYXR0YWNrU3RhcnQ9dGhpcy52YWwpO2NvbnN0IGE9dGhpcy5lbmRUaW1lLXRoaXMuYmVnaW5UaW1lO2ZvcihsZXQgdT0wO3U8bi5sZW5ndGg7dSsrKXtjb25zdCBjPWIocy5hdHRhY2ssdSksaD1iKHMuZGVjYXksdSksZj1iKHMuc3VzdGFpbix1KSxkPWIocy5yZWxlYXNlLHUpLGw9YihzLmF0dGFja0N1cnZlLHUpLHA9YihzLmRlY2F5Q3VydmUsdSksbT1iKHMucmVsZWFzZUN1cnZlLHUpLEk9YihzLnBlYWssdSksZz1be3RpbWU6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLHN0YXJ0OjAsdGFyZ2V0OjB9LHt0aW1lOmMsc3RhcnQ6dGhpcy5hdHRhY2tTdGFydCx0YXJnZXQ6MSxjdXJ2ZTpsfSx7dGltZTpjK2gsc3RhcnQ6MSx0YXJnZXQ6ZixjdXJ2ZTpwfSx7dGltZTphLHN0YXJ0OmYsdGFyZ2V0OmZ9LHt0aW1lOmErZCxzdGFydDpmLHRhcmdldDowLGN1cnZlOm19XTtsZXR7dGltZTp2LHN0YXJ0OlQsdGFyZ2V0OlAsY3VydmU6TX09Z1t0aGlzLnN0YXRlXTtmb3IodGhpcy5fYWR2YW5jZShULFAsdixNKTtjdXJyZW50VGltZS10aGlzLmJlZ2luVGltZT49djspdGhpcy5zdGF0ZT0odGhpcy5zdGF0ZSsxKSVnLmxlbmd0aCx2PWdbdGhpcy5zdGF0ZV0udGltZTtuW3VdPXRoaXMudmFsKkl9cmV0dXJuITB9fXJlZ2lzdGVyUHJvY2Vzc29yKCJlbnZlbG9wZS1wcm9jZXNzb3IiLG1lKTtjb25zdCBCPU9iamVjdC5mcmVlemUoe05PTkU6MCxBU1lNOjEsTUlSUk9SOjIsQkVORFA6MyxCRU5ETTo0LEJFTkRNUDo1LFNZTkM6NixRVUFOVDo3LEZPTEQ6OCxQV006OSxPUkJJVDoxMCxTUElOOjExLENIQU9TOjEyLFBSSU1FUzoxMyxCSU5BUlk6MTQsQlJPV05JQU46MTUsUkVDSVBST0NBTDoxNixXT1JNSE9MRToxNyxMT0dJU1RJQzoxOCxTSUdNT0lEOjE5LEZSQUNUQUw6MjAsRkxJUDoyMX0pO2Z1bmN0aW9uIHZlKHIpe3JldHVybiByPXIrMjEyNzkxMjIxNCsocjw8MTIpLHI9cl4zMzQ1MDcyNzAwXnI+Pj4xOSxyPXIrMzc0NzYxMzkzKyhyPDw1KSxyPXIrMzU1MDYzNTExNl5yPDw5LHI9cis0MjUxOTkzNzk3KyhyPDwzKSxyPXJeMzA0MjU5NDU2OV5yPj4+MTYscj4+PjB9Y29uc3QgenQ9cj0+KHZlKHIpPj4+OCkvMTY3NzcyMTY7ZnVuY3Rpb24gZ2Uocix0KXtsZXQgZT0wO2ZvcihsZXQgcz0wO3M8dDtzKyspZT1lPDwxfHImMSxyPj4+PTE7cmV0dXJuIGV9ZnVuY3Rpb24gYmUocil7Y29uc3QgdD1NYXRoLmZsb29yKHIpLGU9ci10LHM9enQodCksbj16dCh0KzEpO3JldHVybiBzKyhuLXMpKmV9ZnVuY3Rpb24gSWUocix0PTQpe2xldCBlPS41LHM9MCxuPTAsbz0xO2ZvcihsZXQgaT0wO2k8dDtpKyspcys9ZSpiZShyKm8pLG4rPWUsZSo9LjUsbyo9MjtyZXR1cm4gcy9uKjItMX1jb25zdCB3dD17fTtjbGFzcyBfZSBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvcntzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCl7cmV0dXJuW3tuYW1lOiJiZWdpbiIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6ImVuZCIsZGVmYXVsdFZhbHVlOjAsbWluOjAsbWF4Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWX0se25hbWU6ImZyZXF1ZW5jeSIsZGVmYXVsdFZhbHVlOjQ0MCxtaW46TnVtYmVyLkVQU0lMT059LHtuYW1lOiJkZXR1bmUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToiZnJlcXNwcmVhZCIsZGVmYXVsdFZhbHVlOi4xOCxtaW46MH0se25hbWU6InBvc2l0aW9uIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6MX0se25hbWU6IndhcnAiLGRlZmF1bHRWYWx1ZTowLG1pbjowLG1heDoxfSx7bmFtZToid2FycE1vZGUiLGRlZmF1bHRWYWx1ZTowfSx7bmFtZToidm9pY2VzIixkZWZhdWx0VmFsdWU6MSxtaW46MSxhdXRvbWF0aW9uUmF0ZToiay1yYXRlIn0se25hbWU6InBhbnNwcmVhZCIsZGVmYXVsdFZhbHVlOi43LG1pbjowLG1heDoxfSx7bmFtZToicGhhc2VyYW5kIixkZWZhdWx0VmFsdWU6MCxtaW46MCxtYXg6MX1dfWNvbnN0cnVjdG9yKHQpe3N1cGVyKHQpLHRoaXMuZnJhbWVMZW49MCx0aGlzLm51bUZyYW1lcz0wLHRoaXMucGhhc2U9W10sdGhpcy5wb3J0Lm9ubWVzc2FnZT1lPT57Y29uc3R7dHlwZTpzLHBheWxvYWQ6bn09ZS5kYXRhfHx7fTtpZihzPT09InRhYmxlIil7Y29uc3Qgbz1uLmtleTtpZih0aGlzLmZyYW1lTGVuPW4uZnJhbWVMZW4sIXd0W29dKXtjb25zdCBpPVtuLmZyYW1lc107bGV0IGE9aVswXTtmb3IobGV0IHU9MTt1PDE7dSsrKXtjb25zdCBjPWEubGVuZ3RoPj4xLGg9YS5tYXAoZj0+e2NvbnN0IGQ9bmV3IEZsb2F0MzJBcnJheShjKTtmb3IobGV0IGw9MDtsPGM7bCsrKWRbbF09KGZbMipsXStmWzIqbCsxXSkvMjtyZXR1cm4gZH0pO2lmKGkucHVzaChoKSxhPWgsYzw9MzIpYnJlYWt9d3Rbb109aX10aGlzLnRhYmxlcz13dFtvXSx0aGlzLm51bUZyYW1lcz10aGlzLnRhYmxlc1swXS5sZW5ndGh9fX1fbWlycm9yKHQpe3JldHVybiAxLU1hdGguYWJzKDIqdC0xKX1fdG9CaXRzKHQsZT0yLHM9MTIpe2NvbnN0IG49cysoZS1zKSp0O3JldHVybntiOm4sbjokKE1hdGgucG93KDIsbikpfX1fd2FycFBoYXNlKHQsZSxzKXtzd2l0Y2gocyl7Y2FzZSBCLk5PTkU6cmV0dXJuIHQ7Y2FzZSBCLkFTWU06e2NvbnN0IG49LjAxKy45OSplO3JldHVybiB0PG4/LjUqdC9uOi41Ky41Kih0LW4pLygxLW4pfWNhc2UgQi5NSVJST1I6cmV0dXJuIHRoaXMuX21pcnJvcih0aGlzLl93YXJwUGhhc2UodCxlLEIuQVNZTSkpO2Nhc2UgQi5CRU5EUDpyZXR1cm4gTWF0aC5wb3codCwxKzMqZSk7Y2FzZSBCLkJFTkRNOnJldHVybiBNYXRoLnBvdyh0LDEvKDErMyplKSk7Y2FzZSBCLkJFTkRNUDpyZXR1cm4gZTwuNT90aGlzLl93YXJwUGhhc2UodCwxLTIqZSwzKTp0aGlzLl93YXJwUGhhc2UodCwyKmUtMSwyKTtjYXNlIEIuU1lOQzp7Y29uc3Qgbj1NYXRoLnBvdygxNixlKioyKTtyZXR1cm4gdCpuJTF9Y2FzZSBCLlFVQU5UOntjb25zdHtufT10aGlzLl90b0JpdHMoZSk7cmV0dXJuIFoodCpuKS9ufWNhc2UgQi5GT0xEOntjb25zdCBvPTErTWF0aC5tYXgoMSwkKDcqZSkpO3JldHVybiBNYXRoLmFicyhFdChvKnQpLS41KSoyfWNhc2UgQi5QV006e2NvbnN0IG49dyguNSsuNDkqKDIqZS0xKSwwLDEpO3JldHVybiB0PG4/dC9uKi41Oi41Kyh0LW4pLygxLW4pKi41fWNhc2UgQi5PUkJJVDp7Y29uc3Qgbj0uNSplO3JldHVybiBVKHQrbipNYXRoLnNpbihSKjMqdCkpfWNhc2UgQi5TUElOOntjb25zdCBuPS41KmUse246b309dGhpcy5fdG9CaXRzKGUsMSw2KTtyZXR1cm4gVSh0K24qTWF0aC5zaW4oUipvKnQpKX1jYXNlIEIuQ0hBT1M6e2NvbnN0IG89KDMuNysuMyplKSp0KigxLXQpO3JldHVybiB3KCgxLWUpKnQrZSpvLDAsMSl9Y2FzZSBCLlBSSU1FUzp7Y29uc3Qgbj1pPT57aWYoaTwyKXJldHVybiExO2lmKGklMj09PTApcmV0dXJuIGk9PT0yO2ZvcihsZXQgYT0zO2EqKjI8PWk7YSs9MilpZihpJWE9PT0wKXJldHVybiExO3JldHVybiEwfTtsZXR7bjpvfT10aGlzLl90b0JpdHMoZSwzKTtmb3IoOyFuKG8pOylvKys7cmV0dXJuIFoodCpvKS9vfWNhc2UgQi5CSU5BUlk6e2xldHtiOm59PXRoaXMuX3RvQml0cyhlLDMpO249JChuKTtjb25zdCBvPTE8PG4saT1aKHQqbyk7cmV0dXJuIGdlKGksbikvb31jYXNlIEIuQlJPV05JQU46e2NvbnN0IG49LjI1KmUqSWUoNjQqdCw0KTtyZXR1cm4gVSh0K24pfWNhc2UgQi5SRUNJUFJPQ0FMOntjb25zdCBuPTIrNCplLG89dCpuLGk9dCsoMS10KSpuLGE9aT4xZS0xMj9vL2k6MDtyZXR1cm4gdyhhLDAsMSl9Y2FzZSBCLldPUk1IT0xFOntjb25zdCBuPXcoLjgqZSwwLDEpLG89LjUqKDEtbiksaT0uNSooMStuKTtyZXR1cm4gdDxvP3QvbyouNTp0Pmk/LjUqKDErKHQtaSkvKDEtaSkpOi41fWNhc2UgQi5MT0dJU1RJQzp7bGV0IG49dDtjb25zdCBvPTMuNisuNCplLGk9MSskKDIqZSk7Zm9yKGxldCBhPTA7YTxpO2ErKyluPW8qbiooMS1uKTtyZXR1cm4gdyhuLDAsMSl9Y2FzZSBCLlNJR01PSUQ6e2NvbnN0IG49MSsxMCplLG89dC0uNSxpPTEvKDErTWF0aC5leHAoLW4qbykpLGE9MS8oMStNYXRoLmV4cCguNSpuKSksdT0xLygxK01hdGguZXhwKC0uNSpuKSk7cmV0dXJuKGktYSkvKHUtYSl9Y2FzZSBCLkZSQUNUQUw6e2NvbnN0IG49LjUqTWF0aC5zaW4oUip0KSplO3JldHVybiBVKHQrbil9Y2FzZSBCLkZMSVA6cmV0dXJuIHQ7ZGVmYXVsdDpyZXR1cm4gdH19X3NhbXBsZUZyYW1lKHQsZSl7Y29uc3Qgcz10Lmxlbmd0aCxuPWUqcztsZXQgbz1ufDA7bz49cyYmKG89MCk7Y29uc3QgaT1uLW8sYT10W29dO2xldCB1PW8rMTt1Pj1zJiYodT0wKTtjb25zdCBjPXRbdV07cmV0dXJuIGErKGMtYSkqaX1fY2hvb3NlTWlwKHQpe3ZhciBuO2NvbnN0IGU9dyh0LDFlLTYsNjQpO2xldCBzPTA7Zm9yKDtzKzE8KCgobj10aGlzLnRhYmxlcyk9PW51bGw/dm9pZCAwOm4ubGVuZ3RoKXx8MSkmJmU8dGhpcy50YWJsZXNbc11bMF0ubGVuZ3RoLzg7KXMrKztyZXR1cm4gc31wcm9jZXNzKHQsZSxzKXtpZihjdXJyZW50VGltZT49cy5lbmRbMF0pcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXMuYmVnaW5bMF0pcmV0dXJuITA7Y29uc3Qgbj1lWzBdWzBdLG89ZVswXVsxXXx8ZVswXVswXTtpZighdGhpcy50YWJsZXMpcmV0dXJuIG4uZmlsbCgwKSxvIT09biYmby5zZXQobiksITA7Y29uc3QgaT1zLnZvaWNlc1swXTtmb3IobGV0IGE9MDthPG4ubGVuZ3RoO2ErKyl7Y29uc3QgdT1iKHMuZGV0dW5lLGEpLGM9YihzLmZyZXFzcHJlYWQsYSksZj13KGIocy5wb3NpdGlvbixhKSwwLDEpKih0aGlzLm51bUZyYW1lcy0xKSxkPWZ8MCxsPWYtZCxwPXcoYihzLndhcnAsYSksMCwxKSxtPWIocy53YXJwTW9kZSxhKSxJPXcoYihzLnBoYXNlcmFuZCxhKSwwLDEpLGc9aT4xP3coYihzLnBhbnNwcmVhZCxhKSwwLDEpOjAsdj1NYXRoLnNxcnQoLjUtLjUqZyksVD1NYXRoLnNxcnQoLjUrLjUqZyk7bGV0IFA9YihzLmZyZXF1ZW5jeSxhKTtQPVEoUCx1LzEwMCk7Y29uc3QgTT0xL01hdGguc3FydChpKSx4PVJ0KGksYyk7Zm9yKGxldCBTPTA7UzxpO1MrKyl7Y29uc3QgeT0oUyYxKT09MTtsZXQgVj12LEE9VDt5JiYoVj1ULEE9dik7Y29uc3QgTz1RKFAseChTKSkqcSxEPXRoaXMuX2Nob29zZU1pcChPKSxOPXRoaXMudGFibGVzW0RdO3RoaXMucGhhc2VbU109dGhpcy5waGFzZVtTXT8/TWF0aC5yYW5kb20oKSpJO2NvbnN0IEY9dGhpcy5fd2FycFBoYXNlKHRoaXMucGhhc2VbU10scCxtKSx6PXRoaXMuX3NhbXBsZUZyYW1lKE5bZF0sRiksSD10aGlzLl9zYW1wbGVGcmFtZShOW01hdGgubWluKHRoaXMubnVtRnJhbWVzLTEsZCsxKV0sRik7bGV0IEM9bnQoeixILGwpO209PT1CLkZMSVAmJnRoaXMucGhhc2VbU108cCYmKEM9LUMpLG5bYV0rPUMqVipNLG9bYV0rPUMqQSpNLHRoaXMucGhhc2VbU109VSh0aGlzLnBoYXNlW1NdK08pfX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoIndhdmV0YWJsZS1vc2NpbGxhdG9yLXByb2Nlc3NvciIsX2UpO2NsYXNzIHdlIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29ye3N0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKXtyZXR1cm5bXX1jb25zdHJ1Y3Rvcih0KXtzdXBlcigpLHRoaXMuZ2FpbkNvZWZmPXZ0KC4yKSx0aGlzLmF2Z0dhaW49MTtsZXR7YXR0YWNrVGltZTplPS4wMDMsc3VzdGFpblRpbWU6cz0uMDgsYXR0YWNrOm49MCxzdXN0YWluOm89MCxzZW5zaXRpdml0eTppPS4xLG1peDphPTEsYmVnaW46dT0wLGVuZDpjPTB9PXQucHJvY2Vzc29yT3B0aW9ucztlPXcoZSw1ZS00LC4wNSkscz13KHMsLjAxLC41KSx0aGlzLmF0dGFja0NvZWZmPXZ0KGUpLHRoaXMuc3VzdGFpbkNvZWZmPXZ0KHMpLHRoaXMuYXR0YWNrQW10PXcobiwtMSwxKSx0aGlzLnN1c3RhaW5BbXQ9dyhvLC0xLDEpLHRoaXMuc2NhbGluZz0uNSs1KncoaSwwLDEpLHRoaXMubWl4PXcoYSwwLDEpLHRoaXMuYmVnaW49dSx0aGlzLmVuZD1jLHRoaXMuYXR0YWNrRW52PW5ldyBGbG9hdDMyQXJyYXkoMiksdGhpcy5zdXN0YWluRW52PW5ldyBGbG9hdDMyQXJyYXkoMil9cHJvY2Vzcyh0LGUscyl7Y29uc3Qgbj10WzBdLG89ZVswXTtpZihjdXJyZW50VGltZT49dGhpcy5lbmQpcmV0dXJuITE7aWYoY3VycmVudFRpbWU8PXRoaXMuYmVnaW4pcmV0dXJuITA7Y29uc3QgaT1uLmxlbmd0aDtpPnRoaXMuYXR0YWNrRW52Lmxlbmd0aCYmKHRoaXMuYXR0YWNrRW52PW5ldyBGbG9hdDMyQXJyYXkoaSksdGhpcy5zdXN0YWluRW52PW5ldyBGbG9hdDMyQXJyYXkoaSkpO2xldCBhPXRoaXMuYXZnR2Fpbjtmb3IobGV0IHU9MDt1PGk7dSsrKXtsZXQgYz10aGlzLmF0dGFja0Vudlt1XSxoPXRoaXMuc3VzdGFpbkVudlt1XTtmb3IobGV0IGY9MDtmPGo7ZisrKXtjb25zdCBkPW5bdV1bZl0sbD1NYXRoLmFicyhkKTtjPW50KGMsbCx0aGlzLmF0dGFja0NvZWZmKSxoPW50KGgsbCx0aGlzLnN1c3RhaW5Db2VmZik7Y29uc3QgcD13KHRoaXMuc2NhbGluZyooYy1oKS8oaCsxZS02KSwtMS41LDEuNSksbT1wPjA/cDowLEk9cDwwPy1wOjAsZz1rdCh0aGlzLmF0dGFja0FtdCptKjE4KSx2PWt0KHRoaXMuc3VzdGFpbkFtdCpJKjM2KSxUPXcoZyp2LDAsOCk7YT1udChhLFQsdGhpcy5nYWluQ29lZmYpO2NvbnN0IFA9YT4uMDAxPzEvYToxLE09ZCpUKlA7bGV0IHg9bnQoZCxNLHRoaXMubWl4KTt4Lz0xK01hdGguYWJzKHgpLG9bdV1bZl09eH10aGlzLmF0dGFja0Vudlt1XT1jLHRoaXMuc3VzdGFpbkVudlt1XT1ofXJldHVybiB0aGlzLmF2Z0dhaW49YSwhMH19cmV0dXJuIHJlZ2lzdGVyUHJvY2Vzc29yKCJ0cmFuc2llbnQtcHJvY2Vzc29yIix3ZSksay5XYXJwTW9kZT1CLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShrLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxrfSh7fSk7Cg==";let st;const Fn=()=>(st=new AudioContext,st),Xe=t=>(st=t,st),y=()=>st||Fn();function no(){return y().currentTime}let gt={};function Se(t,e){const n=y();if(gt[t])return gt[t];const c=2*n.sampleRate,a=n.createBuffer(1,c,n.sampleRate),o=a.getChannelData(0);let s=0,d,l,h,i,u,Z,b;d=l=h=i=u=Z=b=0;for(let X=0;X<c;X++)if(t==="white")o[X]=Math.random()*2-1;else if(t==="brown"){let G=Math.random()*2-1;o[X]=(s+.02*G)/1.02,s=o[X]}else if(t==="pink"){let G=Math.random()*2-1;d=.99886*d+G*.0555179,l=.99332*l+G*.0750759,h=.969*h+G*.153852,i=.8665*i+G*.3104856,u=.55*u+G*.5329522,Z=-.7616*Z-G*.016898,o[X]=d+l+h+i+u+Z+b+G*.5362,o[X]*=.11,b=G*.115926}else if(t==="crackle"){const G=e*.01;Math.random()<G?o[X]=Math.random()*2-1:o[X]=0}return t!=="crackle"&&(gt[t]=a),a}function Cn(t="white",e,n=.02){const a=y().createBufferSource();return a.buffer=Se(t,n),a.loop=!0,a.start(e),{node:a,stop:o=>a.stop(o)}}function co(t,e,n){const c=Cn("pink",n),a=kn(t,c.node,e);return rt(c.node,()=>{K(c.node)}),{node:a.node,stop:o=>c?.stop(o),teardown:a.teardown}}const wn=["pink","white","brown","crackle"];function St(t){const e=y().createGain();return e.gain.value=t,e}function jt(t,e,n){const c=St(n);return t.connect(c),c.connect(e),c}const Ze=(t,e,n,c)=>c-n===0?0:(e-t)/(c-n);function U(t,e,n,c){const a=new AudioWorkletNode(t,e,c);return Object.entries(n).forEach(([o,s])=>{s!==void 0&&(a.parameters.get(o).value=s)}),a}const dt=(t,e,n,c,a,o,s,d,l,h="exponential")=>{e=D(e),n=D(n),c=D(c),a=D(a);const i=h==="exponential"?"exponentialRampToValueAtTime":"linearRampToValueAtTime";h==="exponential"&&(o=o===0?.001:o,s=s===0?.001:s);const u=s-o,Z=o+c*u,b=l-d,X=G=>{let p;return e>G?p=G*Ze(o,s,0,e)+o:p=(G-e)*Ze(s,Z,0,n)+s,h==="exponential"&&(p=p||.001),p};t.setValueAtTime(o,d),e>b?t[i](X(b),l):e+n>b?(t[i](X(e),d+e),t[i](X(b),l)):(t[i](X(e),d+e),t[i](X(e+n),d+e+n),t.setValueAtTime(Z,l)),t[i](o,l+a)};function gn(t){return typeof t=="number"?t%5:{tri:0,triangle:0,sine:1,ramp:2,saw:3,square:4}[t]??0}function At(t,e,n,c={}){const{shape:a=0,...o}=c,{dcoffset:s=-.5,depth:d=1}=c,l={frequency:1,depth:d,skew:.5,phaseoffset:0,time:e,begin:e,end:n,shape:gn(a),dcoffset:s,min:s*d,max:s*d+d,curve:1,...o};return U(t,"lfo-processor",l)}function In(t,e,n,c,a,o){const s={threshold:e??-3,ratio:n??10,knee:c??10,attack:a??.005,release:o??.05};return new DynamicsCompressorNode(t,s)}const lt=(t,e="linear",n)=>{const[s,d,l,h]=t;if(s==null&&d==null&&l==null&&h==null)return n??[.001,.001,1,.01];const i=l??(s!=null&&d==null||s==null&&d==null?1:.001);return[Math.max(s??0,.001),Math.max(d??0,.001),Math.min(i,1),Math.max(h??0,.01)]};function Ne(t,e,n,c,a){let{defaultDepth:o=1,depth:s,dcoffset:d,...l}=a;s==null&&(s=Object.values(l).some(u=>u!=null)?o:0);let h;return s&&(h=At(t,n,c,{depth:s,dcoffset:d,...l}),h.connect(e)),h}function be(t,e,n,c,a,o){let{amount:s,offset:d,defaultAmount:l=1,curve:h="linear",values:i,holdEnd:u,defaultValues:Z}=a;s==null&&(s=i.some(m=>m!=null)?l:0);const b=d??0,X=s+b;if(Math.abs(X-b)){const[V,m,F,W]=lt(i,h,Z);dt(e,V,m,F,W,b,X,n,u,h)}return Ne(t,e,n,c,o)}function It(t,e,n,c,a,o){let{frequency:s,anchor:d,env:l,type:h,model:i,q:u=1,drive:Z=.69,depth:b,depthfrequency:X,dcoffset:G=-.5,skew:p,shape:V,rate:m,sync:F}=c,W,f;i==="ladder"?(f=U(t,"ladder-processor",{frequency:s,q:u,drive:Z}),W=f.parameters.get("frequency")):(f=t.createBiquadFilter(),f.type=h,f.Q.value=u,f.frequency.value=s,W=f.frequency);const C=[c.attack,c.decay,c.sustain,c.release],[S,g,T,I]=lt(C,"exponential",[.005,.14,0,.1]);if([...C,l].some(Y=>Y!==void 0)){l=D(l,1,!0),d=D(d,0,!0);const Y=Math.abs(l),J=Y*d;let j=at(2**-J*s,0,2e4),B=at(2**(Y-J)*s,0,2e4);l<0&&([j,B]=[B,j]),dt(W,S,g,T,I,j,B,e,n,"exponential")}F!=null&&(m=a*F);const Q=[b,X,p,V,m].some(Y=>Y!==void 0);let k;if(Q){b=b??1;const Y=o/a,j={depth:X??(b??1)*s,dcoffset:G,skew:p,shape:V,frequency:m??a,min:-s+30,max:2e4-s,time:Y,curve:1};k=Ne(t,W,e,n,j)}return{filter:f,lfo:k}}let Ge=t=>t<.5?1:1-(t-.5)/.5;function kn(t,e,n=0){const c=y();if(!n)return t;let a=c.createGain(),o=c.createGain();t.connect(a),e.connect(o),a.gain.value=Ge(n),o.gain.value=Ge(1-n);let s=c.createGain();return a.connect(s),o.connect(s),{node:s,teardown:()=>{K(a),K(o),t.disconnect(a),e.disconnect(o)}}}let Jn=["linear","exponential"];function Te(t,e,n,c){if((e.pattack??e.pdecay??e.psustain??e.prelease??e.penv)===void 0)return;const o=D(e.penv,1,!0),s=Jn[e.pcurve??0];let[d,l,h,i]=lt([e.pattack,e.pdecay,e.psustain,e.prelease],s,[.2,.001,1,.001]),u=e.panchor??h;const Z=o*100,b=0-Z*u,X=Z-Z*u;dt(t,d,l,h,i,b,X,n,c,s)}function He(t,e,n){const{vibmod:c=.5,vib:a}=e;let o;if(a>0){o=y().createOscillator(),o.frequency.value=a;const s=y().createGain();return s.gain.value=c*100,o.connect(s),s.connect(t),rt(o,()=>{K(s),K(o)}),o.start(n),o}}function oo(t,e,n=y()){const c=n.currentTime;qt(n,t,c,e)}function qt(t,e,n,c){const a=new ConstantSourceNode(t),o=St(0);return o.connect(t.destination),a.connect(o),rt(a,()=>{K(o),K(a),e()}),a.start(n),a.stop(c),a}const Pn=(t,e="sine")=>{const n=y();let c;return wn.includes(e)?(c=n.createBufferSource(),c.buffer=Se(e,2),c.loop=!0):(c=n.createOscillator(),c.type=e,c.frequency.value=t),c.start(),c},Un=(t,e,n="sine")=>{const a=t.value*e;return{osc:Pn(a,n),freq:a}};function jn(t,e,n){const c=y(),a=[],o={};for(let s=1;s<=8;s++)for(let d=0;d<=8;d++){let l;s===d+1?l=`fmi${s===1?"":s}`:l=`fmi${s}${d}`;const h=e[l];if(!h)continue;let i=[];for(let[u,Z]of[[!0,s],[!1,d]]){if(Z===0){i.push(t);continue}if(!o[Z]){const F=Z===1?"":Z,{osc:W,freq:f}=Un(t,e[`fmh${F}`]??1,e[`fmwave${F}`]??"sine");a.push(W);const C=[W],S=["attack","decay","sustain","release"].map(T=>e[`fm${T}${F}`]);let g=W;if(S.some(T=>T!==void 0)){const T=c.createGain(),[I,v,Q,k]=lt(S),Y=n+e.duration,J=e[`fmenv${F}`]??"exp";dt(T.gain,I,v,Q,k,0,1,n,Y,J==="exp"?"exponential":"linear"),C.push(T),g=W.connect(T)}o[Z]={input:W.frequency,output:g,freq:f,osc:W,toCleanup:C}}const{input:b,output:X,freq:G,osc:p,toCleanup:V}=o[Z],m=St(h*G);i.push(u?X.connect(m):b),_n(p,[...V,m])}if(!i[1]){x(`[superdough] control ${l} failed to connect FM ${s} to target ${d} due to missing frequency parameter (likely because fm${d} is noise)`,"warning");continue}i[0].connect(i[1])}return{stop:s=>a.forEach(d=>d?.stop(s))}}const Fe=t=>t/(1+t),Bn=(t,e)=>(t%e+e)%e,vn=(t,e)=>(1+e)*t/(1+e*Math.abs(t)),et=(t,e)=>Math.tanh(t*(1+e)),Qn=(t,e)=>at((1+e)*t,-1,1),Ce=(t,e)=>{let n=(1+.5*e)*t;const c=Bn(n+1,4);return 1-Math.abs(c-2)},Dn=(t,e)=>Math.sin(Math.PI/2*Ce(t,e)),On=(t,e)=>{const n=Fe(Math.log1p(e)),c=(t-n/3*t*t*t)/(1-n/3);return et(c,e)},we=(t,e,n=!1)=>{const c=1+2*e,o=.07*Fe(Math.log1p(e)),s=et(t+o,2*e),d=et(n?o:-t+o,2*e),l=s-d,h=1/Math.cosh(c*o),i=h*h,u=Math.max(1e-8,(n?1:2)*c*i);return et(l/u,e)},En=(t,e)=>we(t,e,!0),An=(t,e)=>{const n=10*Math.log1p(e);let c=1,a=t,o,s=0;for(let d=1;d<64;d++){if(d<2){s+=d==0?c:a;continue}o=2*t*c-a,a=c,c=o,d%2===0&&(s+=Math.min(1.3*n/d,2)*o)}return et(s,n/20)},ge={scurve:vn,soft:et,hard:Qn,cubic:On,diode:we,asym:En,fold:Ce,sinefold:Dn,chebyshev:An},Zt=Object.freeze(Object.keys(ge)),ao=t=>{let e=t;typeof t=="string"&&(e=Zt.indexOf(t),e===-1&&(x(`[superdough] Could not find waveshaping algorithm ${t}.
        Available options are ${Zt.join(", ")}.
        Defaulting to ${Zt[0]}.`),e=0));const n=Zt[e%Zt.length];return ge[n]},qn=(t,e,n)=>U(y(),"distort-processor",{distort:t,postgain:e},{processorOptions:{algorithm:n}}),$n=(t,e=36)=>{let{note:n,freq:c,octave:a=0}=t;return n=n||e,typeof n=="string"&&(n=Et(n)),!c&&typeof n=="number"&&(c=Kn(n)),c*=Math.pow(2,a),Number(c)},rt=(t,e)=>{const n=e;t.onended=function(){n&&n(),this.onended=null}},K=t=>{if(t!=null){if(!(t instanceof AudioNode))throw new Error("releaseAudioNode can only release an AudioNode");if(t.disconnect(),t instanceof AudioScheduledSourceNode)try{t.stop()}catch{t.start(t.context.currentTime+5),t.stop()}t instanceof AudioWorkletNode&&t.parameters.get("end")?.setValueAtTime(0,0)}},_n=(t,e)=>{rt(t,()=>e.forEach(n=>K(n)))},$t={},kt={},so=t=>$t[t];function tc(t,e){var n=1024;if(t<n)return t+" B";var c=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do t/=n,++a;while(t>=n);return t.toFixed(1)+" "+c[a]}function ec(t,e){const{speed:n=1}=t,{transpose:c,url:a,index:o,midi:s,label:d}=fe(t,e);let l=Math.abs(n)*Math.pow(2,c/12);return{transpose:c,url:a,index:o,midi:s,label:d,playbackRate:l}}const nc=async(t,e,n)=>{let{url:c,label:a,playbackRate:o}=ec(t,e);n&&(c=await n(c));const s=y(),d=await Ie(c,s,a);return t.unit==="c"&&(o=o*d.duration),{buffer:d,playbackRate:o}},cc=async(t,e,n)=>{let{buffer:c,playbackRate:a}=await nc(t,e,n);t.speed<0&&(c=oc(c));const s=y().createBufferSource();s.buffer=c,s.playbackRate.value=a;const{loopBegin:d=0,loopEnd:l=1,begin:h=0,end:i=1}=t,u=h*s.buffer.duration;t.loop&&(s.loop=!0,s.loopStart=d*s.buffer.duration-u,s.loopEnd=l*s.buffer.duration-u);const b=s.buffer.duration/s.playbackRate.value,X=(i-h)*b;return{bufferSource:s,offset:u,bufferDuration:b,sliceDuration:X}},Ie=(t,e,n,c=0)=>{const a=n?`sound "${n}:${c}"`:"sample";if(t=t.replace("#","%23"),!kt[t]){x(`[sampler] load ${a}..`,"load-sample",{url:t});const o=Date.now();kt[t]=fetch(t).then(s=>s.arrayBuffer()).then(async s=>{const d=Date.now()-o,l=tc(s.byteLength);x(`[sampler] load ${a}... done! loaded ${l} in ${d}ms`,"loaded-sample",{url:t});const h=await e.decodeAudioData(s);return $t[t]=h,h})}return kt[t]};function oc(t){const e=y(),n=e.createBuffer(t.numberOfChannels,t.length,e.sampleRate);for(let c=0;c<t.numberOfChannels;c++)n.copyToChannel(t.getChannelData(c).slice().reverse(),c,c);return n}const lo=t=>$t[t];function ke(t){if(t.startsWith("bubo:")){const[e,n]=t.split(":");t=`github:Bubobubobubobubo/dough-${n}`}return t}function Je(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let n=t.slice(7);n=n.endsWith("/")?n.slice(0,-1):n;let c=n.split("/"),a=c[0],o=c.length>=2?c[1]:"samples",s=c.length>=3?c[2]:"main",d=c.slice(3);return d.push(e||""),d=d.join("/"),`https://raw.githubusercontent.com/${a}/${o}/${s}/${d}`}const ac=(t,e,n=t._base||"")=>Object.entries(t).forEach(([c,a])=>{if(typeof a=="string"&&(a=[a]),typeof a!="object")throw new Error("wrong sample map format for "+c);n=a._base||n,n=ke(n),n.startsWith("github:")&&(n=Je(n,""));const o=s=>n+s;Array.isArray(a)?a=a.map(o):a=Object.fromEntries(Object.entries(a).map(([s,d])=>[s,(typeof d=="string"?[d]:d).map(o)])),e(c,a)});let Pe={};function io(t,e){Pe[t]=e}function sc(t){const e=Object.entries(Pe).find(([n])=>t.startsWith(n));if(e)return e[1]}async function dc(t){const e=sc(t);if(e)return e(t);if(t=ke(t),t.startsWith("github:")&&(t=Je(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),t.startsWith("shabda:")){let[a,o]=t.split("shabda:");t=`https://shabda.ndre.gr/${o}.json?strudel=1`}if(t.startsWith("shabda/speech")){let[a,o]=t.split("shabda/speech");o=o.startsWith("/")?o.substring(1):o;let[s,d]=o.split(":"),l="f",h="en-GB";s&&([h,l]=s.split("/")),t=`https://shabda.ndre.gr/speech/${d}.json?gender=${l}&language=${h}&strudel=1'`}if(typeof fetch!="function")return;const n=Ke(t);if(typeof fetch>"u")return;const c=await fetch(t).then(a=>a.json()).catch(a=>{throw console.error(a),new Error(`error loading "${t}"`)});return[c,c._base||n]}const lc=async(t,e=t._base||"",n={})=>{if(typeof t=="string"){const[o,s]=await dc(t);return lc(o,e||s,n)}const{prebake:c,tag:a}=n;ac(t,(o,s)=>{uc(o,s,{baseUrl:e,prebake:c,tag:a})},e)},me=[];async function ic(t,e,n,c,a){let{s:o,nudge:s=0,cut:d,loop:l,clip:h=void 0,n:i=0,speed:u=1,duration:Z}=e;if(u===0)return;const b=y();let[X,G,p,V]=lt([e.attack,e.decay,e.sustain,e.release]);const{bufferSource:m,sliceDuration:F,offset:W}=await cc(e,c,a);if(!m){x(`[sampler] could not load "${o}:${i}"`,"error");return}if(b.currentTime>t){x(`[sampler] loading sound "${o}:${i}" took too long`,"highlight"),K(m);return}let f=He(m.detune,e,t);const C=t+s;m.start(C,W);const S=b.createGain(),g=m.connect(S);h==null&&l==null&&e.release==null&&(Z=F);let T=t+Z;dt(g.gain,X,G,p,V,0,1,t,T,"linear"),Te(m.detune,e,t,T);const I=b.createGain();g.connect(I),rt(m,function(){K(m),K(f),K(g),K(I),n()});let v=T+V+.01;m.stop(v);const k={node:I,bufferSource:m,stop:Y=>{m.stop(Y)}};if(d!==void 0){const Y=me[d];Y&&(Y.node.gain.setValueAtTime(1,C),Y.node.gain.linearRampToValueAtTime(0,C+.01)),me[d]=k}return k}function hc(t,e,n){Oe(t,(c,a,o)=>ic(c,a,o,e),{type:"sample",samples:e,...n})}function uc(t,e,n){t.startsWith("wt_")?Be(t,e,n):hc(t,e,n)}let tt=(t,e)=>t!==void 0&&t!==e;class Xc{reverbNode;delayNode;output;summingNode;djfNode;audioContext;constructor(e){this.audioContext=e,this.output=new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode=new GainNode(e,{gain:1,channelCount:2,channelCountMode:"explicit"}),this.summingNode.connect(this.output)}disconnect(){this.output.disconnect(),this.summingNode.disconnect(),this.delayNode?.disconnect(),this.reverbNode?.disconnect()}getDjf(e,n=0){this.djfNode==null&&(this.djfNode=U(this.audioContext,"djf-processor",{value:e}),this.summingNode.disconnect(),this.summingNode.connect(this.djfNode),this.djfNode.connect(this.output)),this.djfNode.parameters.get("value").setValueAtTime(e,n)}getDelay(e=0,n=.5,c){return n=at(n,0,.98),this.delayNode==null&&(this.delayNode=this.audioContext.createFeedbackDelay(1,e,n),this.delayNode.connect(this.summingNode),this.delayNode.start?.(c)),this.delayNode.delayTime.value!==e&&this.delayNode.delayTime.setValueAtTime(e,c),this.delayNode.feedback.value!==n&&this.delayNode.feedback.setValueAtTime(n,c),this.delayNode}getReverb(e,n,c,a,o,s,d){return this.reverbNode==null&&(this.reverbNode=this.audioContext.createReverb(e,n,c,a,o,s,d),this.reverbNode.connect(this.summingNode)),(tt(e,this.reverbNode.duration)||tt(n,this.reverbNode.fade)||tt(c,this.reverbNode.lp)||tt(a,this.reverbNode.dim)||tt(s,this.reverbNode.irspeed)||tt(d,this.reverbNode.irbegin)||this.reverbNode.ir!==o)&&this.reverbNode.generate(e,n,c,a,o,s,d),this.reverbNode}sendReverb(e,n){return jt(e,this.reverbNode,n)}sendDelay(e,n){return jt(e,this.delayNode,n)}duck(e,n=0,c=.1,a=1){const o=n,s=Math.max(c,.002),d=this.output.gain;qt(this.audioContext,()=>{const l=this.audioContext.currentTime,h=d.value;d.cancelScheduledValues(l),d.setValueAtTime(h,l);const i=Math.max(e,l),u=at(1-Math.sqrt(a),.01,h);d.exponentialRampToValueAtTime(u,i+o),d.exponentialRampToValueAtTime(1,i+o+s)},0,e-.01)}connectToOutput(e){e.connect(this.summingNode)}}class Zc{channelMerger;destinationGain;constructor(e){this.audioContext=e,this.initializeAudio()}initializeAudio(){const e=this.audioContext,n=e.destination.maxChannelCount;this.audioContext.destination.channelCount=n,this.channelMerger=new ChannelMergerNode(e,{numberOfInputs:e.destination.channelCount}),this.destinationGain=new GainNode(e),this.channelMerger.connect(this.destinationGain),this.destinationGain.connect(e.destination)}reset(){this.disconnect(),this.initializeAudio()}disconnect(){this.channelMerger.disconnect(),this.destinationGain.disconnect(),this.destinationGain=null,this.channelMerger=null}connectToDestination=(e,n=[0,1])=>{const c=new StereoPannerNode(this.audioContext);e.connect(c);const a=new ChannelSplitterNode(this.audioContext,{numberOfOutputs:c.channelCount});c.connect(a),n.forEach((o,s)=>{a.connect(this.channelMerger,s%c.channelCount,o%this.audioContext.destination.channelCount)})}}class Ue{audioContext;output;nodes={};constructor(e){this.audioContext=e,this.output=new Zc(e)}reset(){Array.from(this.nodes).forEach(e=>{e.disconnect()}),this.nodes={},this.output.reset()}duck(e,n,c=0,a=.1,o=1){const s=[e].flat(),d=[c].flat(),l=[a].flat(),h=[o].flat();s.forEach((i,u)=>{const Z=this.nodes[i];if(Z==null){Re(new Error(`duck target orbit ${i} does not exist`),"superdough");return}const b=d[u]??d[0],X=Math.max(l[u]??l[0],.002),G=h[u]??h[0];Z.duck(n,b,X,G)})}getOrbit(e,n){return this.nodes[e]==null&&(this.nodes[e]=new Xc(this.audioContext),this.output.connectToDestination(this.nodes[e].output,n)),this.nodes[e]}}const re=Object.freeze({NONE:0,ASYM:1,MIRROR:2,BENDP:3,BENDM:4,BENDMP:5,SYNC:6,QUANT:7,FOLD:8,PWM:9,ORBIT:10,SPIN:11,CHAOS:12,PRIMES:13,BINARY:14,BROWNIAN:15,RECIPROCAL:16,WORMHOLE:17,LOGISTIC:18,SIGMOID:19,FRACTAL:20,FLIP:21}),Bt=new Set;function bc(){Bt.clear()}async function Gc(t,e,n=2048){const c=`${t},${n}`;if(!Bt.has(c)){const o=(await yc(t,e)).getChannelData(0),s=o.length,d=Math.max(1,Math.floor(s/n)),l=new Array(d);for(let h=0;h<d;h++){const i=h*n;l[h]=o.subarray(i,i+n)}return Bt.add(c),{frames:l,frameLen:n,numFrames:d,key:c}}return{frameLen:n,key:c}}function mc(t,e){var n=1024;if(t<n)return t+" B";var c=["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],a=-1;do t/=n,++a;while(t>=n);return t.toFixed(1)+" "+c[a]}function rc(t){const e=new DataView(t);let n=12;for(;n+8<=e.byteLength;){const c=String.fromCharCode(e.getUint8(n),e.getUint8(n+1),e.getUint8(n+2),e.getUint8(n+3)),a=e.getUint32(n+4,!0);if(c==="fmt ")return e.getUint32(n+12,!0);n+=8+a+(a&1)}return null}async function pc(t){const e=rc(t)||44100;return await new OfflineAudioContext(1,1,e).decodeAudioData(t)}const Jt={},yc=(t,e)=>{if(t=t.replace("#","%23"),!Jt[t]){x(`[wavetable] load table ${e}..`,"load-table",{url:t});const n=Date.now();Jt[t]=fetch(t).then(c=>c.arrayBuffer()).then(async c=>{const a=Date.now()-n,o=mc(c.byteLength);return x(`[wavetable] load table ${e}... done! loaded ${o} in ${a}ms`,"loaded-table",{url:t}),await pc(c)})}return Jt[t]};function je(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,c]=t.split("github:");return c=c.endsWith("/")?c.slice(0,-1):c,c.split("/").length===2&&(c+="/main"),`https://raw.githubusercontent.com/${c}/${e}`}const pe=(t,e,n,c={})=>(e=t._base||e,Object.entries(t).forEach(([a,o])=>{if(a==="_base")return!1;if(typeof o=="string"&&(o=[o]),typeof o!="object")throw new Error("wrong json format for "+a);let s=e;s.startsWith("github:")&&(s=je(s,"")),o=o.map(d=>s+d).filter(d=>d.toLowerCase().endsWith(".wav")?!0:(x(`[wavetable] skipping ${d} -- wavetables must be ".wav" format`),!1)),o.length&&Be(a,o,{baseUrl:e,frameLen:n})}));function Be(t,e,n){Oe(t,(c,a,o,s)=>Wc(c,a,o,e,s,n?.frameLen??2048),{type:"wavetable",tables:e,...n})}const ho=async(t,e,n,c={})=>{if(n!==void 0)return pe(n,t,e);t.startsWith("github:")&&(t=je(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432");const a=Ke(t);if(typeof fetch=="function"&&!(typeof fetch>"u"))return fetch(t).then(o=>o.json()).then(o=>pe(o,a,e,c)).catch(o=>{throw console.error(o),new Error(`error loading "${t}"`)})};async function Wc(t,e,n,c,a,o){const{s,n:d=0,duration:l,clip:h}=e,i=y(),[u,Z,b,X]=lt([e.attack,e.decay,e.sustain,e.release]);let{warpmode:G}=e;typeof G=="string"&&(G=re[G.toUpperCase()]??re.NONE);const p=$n(e),{url:V,label:m}=fe(e,c),F=await Gc(V,m,o);let W=t+l;h!==void 0&&(W=Math.min(t+h*l,W));const f=W+X,C=f+.01,S=U(i,"wavetable-oscillator-processor",{begin:t,end:C,frequency:p,freqspread:e.detune,position:e.wt,warp:e.warp,warpMode:G,voices:Math.max(e.unison??1,1),panspread:e.spread,phaserand:e.wtphaserand??e.unison>1?1:0},{outputChannelCount:[2]});if(S.port.postMessage({type:"table",payload:F}),i.currentTime>t){x(`[wavetable] still loading sound "${s}:${d}"`,"highlight");return}const g=[e.wtattack,e.wtdecay,e.wtsustain,e.wtrelease],T=[e.warpattack,e.warpdecay,e.warpsustain,e.warprelease],I=S.parameters,v=I.get("position"),Q=I.get("warp");let k=e.wtrate;e.wtsync!=null&&(k=a*e.wtsync);const Y=be(i,v,t,f,{offset:e.wt,amount:e.wtenv,defaultAmount:.5,shape:"linear",values:g,holdEnd:W,defaultValues:[0,.5,0,.1]},{frequency:k,depth:e.wtdepth,defaultDepth:.5,shape:e.wtshape,skew:e.wtskew,dcoffset:e.wtdc??0});let J=e.warprate;e.warpsync!=null&&(J=J=a*e.warpsync);const j=be(i,Q,t,f,{offset:e.warp,amount:e.warpenv,defaultAmount:.5,shape:"linear",values:T,holdEnd:W,defaultValues:[0,.5,0,.1]},{frequency:J,depth:e.warpdepth,defaultDepth:.5,shape:e.warpshape,skew:e.warpskew,dcoffset:e.warpdc??0}),B=He(S.parameters.get("detune"),e,t),yt=jn(S.parameters.get("frequency"),e,t),it=i.createGain(),ht=S.connect(it);dt(ht.gain,u,Z,b,X,0,.3,t,W,"linear"),Te(S.parameters.get("detune"),e,t,W);const _={node:ht,source:S},Nt=qt(i,()=>{K(S),K(B),yt?.stop(),K(Y),K(j),n()},t,C);return _.stop=Wt=>{Nt.stop(Wt)},_}const ve=128,vt="System Standard";let Qe=ve;function Vc(t){Qe=parseInt(t)??ve}let De=!1;function Lc(t){De=t==!0}const $=Wn();function Oe(t,e,n={}){t=t.toLowerCase().replace(/\s+/g,"_"),$.setKey(t,{onTrigger:e,data:n})}let Ee=t=>t;function E(t){return Ee(t)}function uo(t){Ee=t}function Qt(t){for(const n in t)t[n.toLowerCase()]=t[n];const e=$.get();for(const n in e){const[c,a]=n.split("_");if(!a)continue;const o=t[c];if(o){if(typeof o=="string")e[`${o}_${a}`.toLowerCase()]=e[n];else if(Array.isArray(o))for(const s of o)e[`${s}_${a}`.toLowerCase()]=e[n]}}$.set({...e})}async function Mc(t){const n=await(await fetch(t)).json();Qt(n)}async function Xo(...t){switch(t.length){case 1:return typeof t[0]=="string"?Mc(t[0]):Qt(t[0]);case 2:return Qt({[t[0]]:t[1]});default:throw new Error("aliasMap expects 1 or 2 arguments, received "+t.length)}}function Zo(t,e){if(Gt(t)==null){x("soundAlias: original sound not found");return}$.setKey(e,Gt(t))}function Gt(t){return typeof t!="string"?(console.warn(`getSound: expected string got "${t}". fall back to triangle`),$.get().triangle):$.get()[t.toLowerCase()]}const zc=async()=>{await navigator.mediaDevices.getUserMedia({audio:!0});let t=await navigator.mediaDevices.enumerateDevices();t=t.filter(n=>n.kind==="audiooutput"&&n.deviceId!=="default");const e=new Map;return e.set(vt,""),t.forEach(n=>{e.set(n.label,n.deviceId)}),e};let pt={s:"triangle",gain:.8,postgain:1,density:".03",channels:[1,2],phaserdepth:.75,shapevol:1,distortvol:1,distorttype:0,delay:0,byteBeatExpression:"0",delayfeedback:.5,delaysync:3/16,orbit:1,i:1,velocity:1,fft:8};const Yc=Object.freeze({...pt});function bo(t,e){pt[t]=e}function Go(){pt={...Yc}}let _t=new Map(Object.entries(pt));function Ae(t,e){_t.set(t,e)}function N(t){return _t.get(t)}function mo(t){Object.keys(t).forEach(e=>{Ae(e,t[e])})}function Rc(){_t=new Map(Object.entries(pt))}function ro(t){Rc(),t==="1.0"&&Ae("fanchor",.5)}const po=()=>$.set({});let qe=[];function xc(t){qe.push(t)}let Rt;function fc(){if(!Rt){const t=y(),e=qe.concat([Hn]);Rt=Promise.all(e.map(n=>t.audioWorklet.addModule(n))).then(()=>Rt=void 0)}return Rt}async function $e(t={}){const{disableWorklets:e=!1,maxPolyphony:n,audioDeviceName:c=vt,multiChannelOrbits:a=!1}=t;if(Vc(n),Lc(a),bc(),typeof window>"u")return;const o=y();if(c!=null&&c!=vt)try{const d=(await zc()).get(c),l=(d??"").length>0;o.sinkId!==d&&l&&await o.setSinkId(d),x(`[superdough] Audio Device set to ${c}, it might take a few seconds before audio plays on all output channels`)}catch{x("[superdough] failed to set audio interface","warning")}if(!o instanceof OfflineAudioContext&&await o.resume(),e){x("[superdough]: AudioWorklets disabled with disableWorklets");return}try{await fc(),x("[superdough] AudioWorklets loaded")}catch(s){console.warn("could not load AudioWorklet effects",s)}x("[superdough] ready")}let Pt;async function yo(t){return Pt||(Pt=new Promise(e=>{document.addEventListener("mousedown",async function n(){document.removeEventListener("mousedown",n),await $e(t),e()})})),Pt}let nt;function _e(){return nt==null&&(nt=new Ue(y())),nt}function ye(t){return nt=t,nt}function Kc(t,e){_e().output.connectToDestination(t,e)}function Sc(t,e,n=1,c=.5,a=1e3,o=2e3){const s=y(),d=At(s,t,e,{frequency:n,depth:o*2}),l=1;let h=282;const i=[];for(let u=0;u<l;u++){const Z=s.createBiquadFilter();Z.type="notch",Z.gain.value=1,Z.frequency.value=a+h,Z.Q.value=2-Math.min(Math.max(c*2,0),1.9),d.connect(Z.detune),h+=282,i.push(Z)}return{filterChain:i,lfo:d}}function Nc(t){t=t??0;const e=["12db","ladder","24db"];return typeof t=="number"?e[Math.floor(xe(t,e.length))]:t}let H={},ct={};function Tc(t,e=1024,n=.5){if(!H[t]||H[t].audioContext!=y()){const c=y().createAnalyser();c.fftSize=e,c.smoothingTimeConstant=n,H[t]=c,ct[t]=new Float32Array(H[t].frequencyBinCount)}return H[t].fftSize!==e&&(H[t].fftSize=e,ct[t]=new Float32Array(H[t].frequencyBinCount)),H[t]}function te(t="time",e=1){const n={time:()=>H[e]?.getFloatTimeDomainData(ct[e]),frequency:()=>H[e]?.getFloatFrequencyData(ct[e])}[t];if(!n)throw new Error(`getAnalyzerData: ${t} not supported. use one of ${Object.keys(n).join(", ")}`);return n(),ct[e]}function Hc(){nt?.reset(),H={},ct={}}let bt=new Map;function We(t){return(Array.isArray(t)?t:[t]).map(e=>e-1)}const ee=async(t,e,n,c=.5,a=.5)=>{const o=y(),s=_e();let{stretch:d}=t;if(d!=null&&(e=e-.04),typeof t!="object")throw new Error(`expected hap.value to be an object, but got "${t}". Hint: append .note() or .s() to the end`,"error");if(t.duration=n,e<o.currentTime){console.warn(`[superdough]: cannot schedule sounds in the past (target: ${e.toFixed(2)}, now: ${o.currentTime.toFixed(2)})`);return}let{tremolo:l,tremolosync:h,tremolodepth:i=1,tremoloskew:u,tremolophase:Z=0,tremoloshape:b,s:X=N("s"),bank:G,source:p,gain:V=N("gain"),postgain:m=N("postgain"),density:F=N("density"),duckorbit:W,duckonset:f,duckattack:C,duckdepth:S,djf:g,fanchor:T=N("fanchor"),release:I=0,phaserrate:v,phaserdepth:Q=N("phaserdepth"),phasersweep:k,phasercenter:Y,coarse:J,crush:j,dry:B,shape:yt,shapevol:it=N("shapevol"),distort:ht,distortvol:_=N("distortvol"),distorttype:Nt=N("distorttype"),pan:Wt,vowel:ne,delay:Vt=N("delay"),delayfeedback:ce=N("delayfeedback"),delaysync:cn=N("delaysync"),delaytime:Lt,orbit:Mt=N("orbit"),room:oe,roomfade:on,roomlp:an,roomdim:sn,roomsize:dn,ir:Tt,irspeed:ln,irbegin:hn,i:ae=N("i"),velocity:Ht=N("velocity"),analyze:se,fft:un=N("fft"),compressor:de,compressorRatio:Xn,compressorKnee:Zn,compressorAttack:bn,compressorRelease:Gn,transient:le,transsustain:mn}=t;Lt=Lt??Tn(cn,c);const rn=We(De&&Mt>0?[Mt*2-1,Mt*2]:N("channels")),pn=t.channels!=null?We(t.channels):rn,q=s.getOrbit(Mt,pn);W!=null&&s.duck(W,e,f,C,S),V=E(D(V,1)),m=E(m),it=E(it),_=E(_),Vt=E(Vt),Ht=E(Ht),i=E(i),V*=Ht;const zt=e+n,Ft=zt+I,ie=Math.round(Math.random()*1e6);for(let r=0;r<=bt.size-Qe;r++){const M=bt.entries().next(),z=M.value[1].deref(),R=M.value[0],P=e+.25;z?.node?.gain?.linearRampToValueAtTime(0,P),z?.stop?.(P),bt.delete(R)}let w=[];if(["-","~","_"].includes(X))return;G&&X&&(X=`${G}_${X}`,t.s=X);let Yt;if(p)Yt=p(e,t,n,c);else if(Gt(X)){const{onTrigger:r}=Gt(X),z=await r(e,t,()=>{w.forEach(R=>K(R)),bt.delete(ie)},c);z&&(Yt=z.node,bt.set(ie,new WeakRef(z)))}else throw new Error(`sound ${X} not found! Is it loaded?`);if(!Yt)return;if(o.currentTime>e){x("[webaudio] skip hap: still loading",o.currentTime-e);return}const L=[];L.push(Yt),d!==void 0&&L.push(U(o,"phase-vocoder-processor",{pitchFactor:d})),le!==void 0&&L.push(U(o,"transient-processor",{},{processorOptions:{attack:le,sustain:mn,begin:e,end:Ft}})),L.push(St(V));const Ct=Nc(t.ftype);if(t.cutoff!==void 0){const M=wt(t,{frequency:"cutoff",q:"resonance",attack:"lpattack",decay:"lpdecay",sustain:"lpsustain",release:"lprelease",env:"lpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"lprate",sync:"lpsync",depth:"lpdepth",depthfrequency:"lpdepthfrequency",shape:"lpshape",dcoffset:"lpdc",skew:"lpskew"});M.type="lowpass";const z=()=>It(o,e,zt,M,c,a),{filter:R,lfo:P}=z();if(L.push(R),P&&w.push(P),Ct==="24db"){const{filter:Xt,lfo:O}=z();L.push(Xt),O&&w.push(O)}}if(t.hcutoff!==void 0){const M=wt(t,{frequency:"hcutoff",q:"hresonance",attack:"hpattack",decay:"hpdecay",sustain:"hpsustain",release:"hprelease",env:"hpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"hprate",sync:"hpsync",depth:"hpdepth",depthfrequency:"hpdepthfrequency",shape:"hpshape",dcoffset:"hpdc",skew:"hpskew"});M.type="highpass";const z=()=>It(o,e,zt,M,c,a),{filter:R,lfo:P}=z();if(L.push(R),P&&w.push(P),Ct==="24db"){const{filter:Xt,lfo:O}=z();L.push(Xt),O&&w.push(O)}}if(t.bandf!==void 0){const M=wt(t,{frequency:"bandf",q:"bandq",attack:"bpattack",decay:"bpdecay",sustain:"bpsustain",release:"bprelease",env:"bpenv",anchor:"fanchor",model:"ftype",drive:"drive",rate:"bprate",sync:"bpsync",depth:"bpdepth",depthfrequency:"bpdepthfrequency",shape:"bpshape",dcoffset:"bpdc",skew:"bpskew"});M.type="bandpass";const z=()=>It(o,e,zt,M,c,a),{filter:R,lfo:P}=z();if(L.push(R),P&&w.push(P),Ct==="24db"){const{filter:Xt,lfo:O}=z();L.push(Xt),O&&w.push(O)}}if(ne!==void 0){const r=o.createVowelFilter(ne);L.push(r)}if(J!==void 0&&L.push(U(o,"coarse-processor",{coarse:J})),j!==void 0&&L.push(U(o,"crush-processor",{crush:j})),yt!==void 0&&L.push(U(o,"shape-processor",{shape:yt,postgain:it})),ht!==void 0&&L.push(qn(ht,_,Nt)),h!=null&&(l=c*h),t.wtPosSynced!=null&&(t.wtPosRate/=c),t.wtWarpSynced!=null&&(t.wtWarpRate/=c),l!==void 0){const r=Math.max(1-i,0),M=new GainNode(o,{gain:r}),z=a/c,R=At(o,e,Ft,{skew:u??(b!=null?.5:1),frequency:l,depth:i,time:z,dcoffset:0,shape:b,phaseoffset:Z,min:0,max:1,curve:1.5});R.connect(M.gain),w.push(R),L.push(M)}if(de!==void 0&&L.push(In(o,de,Xn,Zn,bn,Gn)),Wt!==void 0){const r=o.createStereoPanner();r.pan.value=2*Wt-1,L.push(r)}if(v!==void 0&&Q>0){const{filterChain:r,lfo:M}=Sc(e,Ft,v,Q,Y,k);w.push(M),L.push(...r)}const ut=new GainNode(o,{gain:m});if(L.push(ut),Vt>0&&Lt>0&&ce>0){q.getDelay(Lt,ce,e);const r=q.sendDelay(ut,Vt);w.push(r)}if(oe>0){let r;if(Tt!==void 0){let z,R=Gt(Tt);Array.isArray(R)?z=R.data.samples[ae%R.data.samples.length]:typeof R=="object"&&(z=Object.values(R.data.samples).flat()[ae%Object.values(R.data.samples).length]),r=await Ie(z,o,Tt,0)}q.getReverb(dn,on,an,sn,r,ln,hn);const M=q.sendReverb(ut,oe);w.push(M)}if(g!=null&&q.getDjf(g,e),se&&!(o instanceof OfflineAudioContext)){const r=Tc(se,2**(un+5)),M=jt(ut,r,1);w.push(M)}if(B!=null){B=E(B);const r=new GainNode(o,{gain:B});L.push(r),q.connectToOutput(r)}else q.connectToOutput(ut);L.slice(1).reduce((r,M)=>r.connect(M),L[0]),w=w.concat(L)},Wo=(t,e,n,c)=>{ee(e,t-n,e.duration/c,c)};let ot;async function Fc(t,e){const n=`dsp-worklet-${Date.now()}`,c=`${e}
let __q = []; // trigger queue
class MyProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.t = 0;
    this.stopped = false;
    this.port.onmessage = (e) => {
      if(e.data==='stop') {
        this.stopped = true;
      } else if(e.data?.dough) {
        __q.push(e.data)
      } else {
        msg?.(e.data)
      }
    };
  }
  process(inputs, outputs, parameters) {
    const output = outputs[0];
    if(__q.length) {
      for(let i=0;i<__q.length;++i) {
        const deadline = __q[i].time-currentTime;
        if(deadline<=0) {
          trigger(__q[i].dough)
          __q.splice(i,1)
        }
      }
    }
    for (let i = 0; i < output[0].length; i++) {
      const out = dsp(this.t / sampleRate);
      output.forEach((channel) => {
        channel[i] = out;
      });
      this.t++;
    }
  return !this.stopped;
  }
}
registerProcessor('${n}', MyProcessor);
`,o=`data:text/javascript;base64,${btoa(c)}`;await t.audioWorklet.addModule(o);const s=new AudioWorkletNode(t,n);return{node:s,stop:()=>s.port.postMessage("stop")}}const tn=()=>{ot&&(ot?.stop(),ot?.node?.disconnect())};typeof window<"u"&&window.addEventListener("message",t=>{t.data==="strudel-stop"?tn():t.data?.dough&&ot?.node.port.postMessage(t.data)});const Vo=async t=>{const e=y();tn(),ot=await Fc(e,t),ot.node.connect(e.destination)};function Cc(t,e,n,c){window.postMessage({time:c,dough:t.value,currentTime:e,duration:t.duration,cps:n})}let mt;function wc(){const t=y();mt=U(t,"dough-processor",{},{outputChannelCount:[2]}),Kc(mt)}const ft=new Map,Ve=new Map;A.prototype.supradough=function(){return this.onTrigger((t,e,n,c)=>{t.value._begin=c,t.value._duration=t.duration/n,!mt&&wc();const a=(t.value.bank?t.value.bank+"_":"")+t.value.s,o=t.value.n??0,s=`${a}:${o}`;if(ft.has(a)&&(t.value.s=s),ft.has(a)&&!Ve.has(s)){const d=ft.get(a),l=d[o%d.length];console.log(`load ${s} from ${l}`);const h=kc(l);Ve.set(s,h),h.then(({channels:i,sampleRate:u})=>mt.port.postMessage({sample:s,channels:i,sampleRate:u}))}mt.port.postMessage({spawn:t.value})},1)};function gc(t,e=""){if(!t.startsWith("github:"))throw new Error('expected "github:" at the start of pseudoUrl');let[n,c]=t.split("github:");return c=c.endsWith("/")?c.slice(0,-1):c,c.split("/").length===2&&(c+="/main"),`https://raw.githubusercontent.com/${c}/${e}`}async function Ic(t){if(t.startsWith("github:")&&(t=gc(t,"strudel.json")),t.startsWith("local:")&&(t="http://localhost:5432"),t.startsWith("shabda:")){let[c,a]=t.split("shabda:");t=`https://shabda.ndre.gr/${a}.json?strudel=1`}if(t.startsWith("shabda/speech")){let[c,a]=t.split("shabda/speech");a=a.startsWith("/")?a.substring(1):a;let[o,s]=a.split(":"),d="f",l="en-GB";o&&([l,d]=o.split("/")),t=`https://shabda.ndre.gr/speech/${s}.json?gender=${d}&language=${l}&strudel=1'`}if(typeof fetch!="function")return;const e=t.split("/").slice(0,-1).join("/");if(typeof fetch>"u")return;const n=await fetch(t).then(c=>c.json()).catch(c=>{throw console.error(c),new Error(`error loading "${t}"`)});return[n,n._base||e]}async function kc(t){const e=await fetch(t).then(c=>c.arrayBuffer()).then(c=>y().decodeAudioData(c));let n=[];for(let c=0;c<e.numberOfChannels;c++)n.push(e.getChannelData(c));return{channels:n,sampleRate:e.sampleRate}}async function Jc(t,e){if(typeof t=="string"){const[n,c]=await Ic(t);return Jc(n,c)}Object.entries(t).map(async([n,c])=>{n!=="_base"&&(c=c.map(a=>e+a),ft.set(n,c))})}const Pc="data:text/javascript;base64,dmFyIGh0PU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgbnQ9KHUsbSxmKT0+bSBpbiB1P2h0KHUsbSx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6Zn0pOnVbbV09Zjt2YXIgZT0odSxtLGYpPT5udCh1LHR5cGVvZiBtIT0ic3ltYm9sIj9tKyIiOm0sZik7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2NvbnN0IHU9dHlwZW9mIHNhbXBsZVJhdGU8InUiP3NhbXBsZVJhdGU6NDhlMyxtPU1hdGguUEkvdSxmPTEvdTtsZXQgVj1oPT5NYXRoLnBvdyhoLDIpO2NvbnN0IE89KGgscyx0KT0+TWF0aC5taW4oTWF0aC5tYXgoaCxzKSx0KTtmdW5jdGlvbiBfKGgpe3JldHVybiBWKGgpfWZ1bmN0aW9uIFQoaCxzLHQpe2NvbnN0IGk9TWF0aC5zaW4oKDEtdCkqLjUqTWF0aC5QSSksbj1NYXRoLnNpbih0Ki41Kk1hdGguUEkpO3JldHVybiBoKmkrcypufWNsYXNzIGd7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNpbih0aGlzLnBoYXNlKjIqTWF0aC5QSSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2Urcy91KSUxLHR9fWNsYXNzIEl7Y29uc3RydWN0b3IoKXtlKHRoaXMsInBoYXNlIiwwKX11cGRhdGUocyl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTEqMi0xfX1mdW5jdGlvbiBNKGgscyl7cmV0dXJuIGg8cz8oaC89cyxoK2gtaCpoLTEpOmg+MS1zPyhoPShoLTEpL3MsaCpoK2graCsxKTowfWNsYXNzIFN7Y29uc3RydWN0b3Iocz17fSl7dGhpcy5waGFzZT1zLnBoYXNlPz8wfXVwZGF0ZShzKXtjb25zdCB0PXMvdTtsZXQgaT1NKHRoaXMucGhhc2UsdCksbj0yKnRoaXMucGhhc2UtMS1pO3JldHVybiB0aGlzLnBoYXNlKz10LHRoaXMucGhhc2U+MSYmKHRoaXMucGhhc2UtPTEpLG59fWZ1bmN0aW9uIHooaCxzLHQpe3JldHVybiBoPDI/MDooKG4sbCxyKT0+cioobC1uKStuKSgtcyouNSxzKi41LHQvKGgtMSkpfWZ1bmN0aW9uIEYoaCxzKXtyZXR1cm4gaCpNYXRoLnBvdygyLHMvMTIpfWNsYXNzIEx7Y29uc3RydWN0b3Iocz17fSl7dGhpcy52b2ljZXM9cy52b2ljZXM/PzUsdGhpcy5mcmVxc3ByZWFkPXMuZnJlcXNwcmVhZD8/LjIsdGhpcy5wYW5zcHJlYWQ9cy5wYW5zcHJlYWQ/Py40LHRoaXMucGhhc2U9bmV3IEZsb2F0MzJBcnJheSh0aGlzLnZvaWNlcykubWFwKCgpPT5NYXRoLnJhbmRvbSgpKX11cGRhdGUocyl7Y29uc3QgdD1NYXRoLnNxcnQoMS10aGlzLnBhbnNwcmVhZCksaT1NYXRoLnNxcnQodGhpcy5wYW5zcHJlYWQpO2xldCBuPTAsbD0wO2ZvcihsZXQgcj0wO3I8dGhpcy52b2ljZXM7cisrKXtjb25zdCBhPUYocyx6KHRoaXMudm9pY2VzLHRoaXMuZnJlcXNwcmVhZCxyKSkvdSxjPShyJjEpPT0xO2xldCBkPXQ7YyYmKGQ9aSk7bGV0IGI9TSh0aGlzLnBoYXNlW3JdLGEpLEU9Mip0aGlzLnBoYXNlW3JdLTEtYjtuPW4rRSpkLGw9bCtFKmQsdGhpcy5waGFzZVtyXSs9YSx0aGlzLnBoYXNlW3JdPjEmJih0aGlzLnBoYXNlW3JdLT0xKX1yZXR1cm4gbitsfX1jbGFzcyBre2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMpe3RoaXMucGhhc2UrPWYqcztsZXQgdD10aGlzLnBoYXNlJTE7cmV0dXJuKHQ8LjU/Mip0OjEtMioodC0uNSkpKjItMX19Y2xhc3MgcXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiczAiLDApO2UodGhpcywiczEiLDApfXVwZGF0ZShzLHQsaT0wKXtpPU1hdGgubWF4KGksMCksdD1NYXRoLm1pbih0LDJlNCk7bGV0IG49MipNYXRoLnNpbih0Km0pO249TyhuLDAsMS4xNCk7Y29uc3Qgcj0xLU1hdGgucG93KC41LChpKy4xMjUpLy4xMjUpKm47cmV0dXJuIHRoaXMuczA9cip0aGlzLnMwLW4qdGhpcy5zMStuKnMsdGhpcy5zMT1yKnRoaXMuczErbip0aGlzLnMwLHRoaXMuczF9fWNsYXNzIEN7Y29uc3RydWN0b3Iocz0wKXt0aGlzLnBoYXNlPXN9c2F3KHMsdCl7bGV0IGk9KHRoaXMucGhhc2UrcyklMSxuPU0oaSx0KTtyZXR1cm4gMippLTEtbn11cGRhdGUocyx0PS41KXtjb25zdCBpPXMvdTtsZXQgbj10aGlzLnNhdygwLGkpLXRoaXMuc2F3KHQsaSk7cmV0dXJuIHRoaXMucGhhc2U9KHRoaXMucGhhc2UraSklMSxuK3QqMi0xfX1jbGFzcyBOe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJwaGFzZSIsMCl9dXBkYXRlKHMsdD0uNSl7cmV0dXJuIHRoaXMucGhhc2UrPWYqcyx0aGlzLnBoYXNlJTE8dD8xOi0xfX1jbGFzcyBQe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ1cGRhdGUiLHM9Pk1hdGgucmFuZG9tKCk8cypmP01hdGgucmFuZG9tKCk6MCl9fWNsYXNzIEd7dXBkYXRlKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkqMi0xfX1jbGFzcyBqe2NvbnN0cnVjdG9yKCl7dGhpcy5vdXQ9MH11cGRhdGUoKXtsZXQgcz1NYXRoLnJhbmRvbSgpKjItMTtyZXR1cm4gdGhpcy5vdXQ9KHRoaXMub3V0Ky4wMipzKS8xLjAyLHRoaXMub3V0fX1jbGFzcyBCe2NvbnN0cnVjdG9yKCl7dGhpcy5iMD0wLHRoaXMuYjE9MCx0aGlzLmIyPTAsdGhpcy5iMz0wLHRoaXMuYjQ9MCx0aGlzLmI1PTAsdGhpcy5iNj0wfXVwZGF0ZSgpe2NvbnN0IHM9TWF0aC5yYW5kb20oKSoyLTE7dGhpcy5iMD0uOTk4ODYqdGhpcy5iMCtzKi4wNTU1MTc5LHRoaXMuYjE9Ljk5MzMyKnRoaXMuYjErcyouMDc1MDc1OSx0aGlzLmIyPS45NjkqdGhpcy5iMitzKi4xNTM4NTIsdGhpcy5iMz0uODY2NSp0aGlzLmIzK3MqLjMxMDQ4NTYsdGhpcy5iND0uNTUqdGhpcy5iNCtzKi41MzI5NTIyLHRoaXMuYjU9LS43NjE2KnRoaXMuYjUtcyouMDE2ODk4O2NvbnN0IHQ9dGhpcy5iMCt0aGlzLmIxK3RoaXMuYjIrdGhpcy5iMyt0aGlzLmI0K3RoaXMuYjUrdGhpcy5iNitzKi41MzYyO3JldHVybiB0aGlzLmI2PXMqLjExNTkyNix0Ki4xMX19Y2xhc3MgJHtjb25zdHJ1Y3Rvcigpe2UodGhpcywicGhhc2UiLDEpfXVwZGF0ZShzKXt0aGlzLnBoYXNlKz1mKnM7bGV0IHQ9dGhpcy5waGFzZT49MT8xOjA7cmV0dXJuIHRoaXMucGhhc2U9dGhpcy5waGFzZSUxLHR9fWZ1bmN0aW9uIHgoaCxzLHQsaT0xKXtpZihoPD0wKXJldHVybiBzO2lmKGg+PTEpcmV0dXJuIHQ7bGV0IG47cmV0dXJuIGk9PT0wP249aDppPjA/bj1NYXRoLnBvdyhoLGkpOm49MS1NYXRoLnBvdygxLWgsLWkpLHMrKHQtcykqbn1jbGFzcyB2e2NvbnN0cnVjdG9yKHM9e30pe3RoaXMuc3RhdGU9Im9mZiIsdGhpcy5zdGFydFRpbWU9MCx0aGlzLnN0YXJ0VmFsPTAsdGhpcy5kZWNheUN1cnZlPXMuZGVjYXlDdXJ2ZT8/MX11cGRhdGUocyx0LGksbixsLHIpe3N3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIm9mZiI6cmV0dXJuIHQ+MCYmKHRoaXMuc3RhdGU9ImF0dGFjayIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPTApLDA7Y2FzZSJhdHRhY2siOntsZXQgcD1zLXRoaXMuc3RhcnRUaW1lO3JldHVybiBwPmk/KHRoaXMuc3RhdGU9ImRlY2F5Iix0aGlzLnN0YXJ0VGltZT1zLDEpOngocC9pLHRoaXMuc3RhcnRWYWwsMSwxKX1jYXNlImRlY2F5Ijp7bGV0IHA9cy10aGlzLnN0YXJ0VGltZSxhPXgocC9uLDEsbCwtdGhpcy5kZWNheUN1cnZlKTtyZXR1cm4gdDw9MD8odGhpcy5zdGF0ZT0icmVsZWFzZSIsdGhpcy5zdGFydFRpbWU9cyx0aGlzLnN0YXJ0VmFsPWEsYSk6cD5uPyh0aGlzLnN0YXRlPSJzdXN0YWluIix0aGlzLnN0YXJ0VGltZT1zLGwpOmF9Y2FzZSJzdXN0YWluIjpyZXR1cm4gdDw9MCYmKHRoaXMuc3RhdGU9InJlbGVhc2UiLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1sKSxsO2Nhc2UicmVsZWFzZSI6e2xldCBwPXMtdGhpcy5zdGFydFRpbWU7aWYocD5yKXJldHVybiB0aGlzLnN0YXRlPSJvZmYiLDA7bGV0IGE9eChwL3IsdGhpcy5zdGFydFZhbCwwLC10aGlzLmRlY2F5Q3VydmUpO3JldHVybiB0PjAmJih0aGlzLnN0YXRlPSJhdHRhY2siLHRoaXMuc3RhcnRUaW1lPXMsdGhpcy5zdGFydFZhbD1hKSxhfX10aHJvdyJpbnZhbGlkIGVudmVsb3BlIHN0YXRlIn19Y29uc3QgVz0xMDtjbGFzcyBSe2NvbnN0cnVjdG9yKCl7ZSh0aGlzLCJ3cml0ZUlkeCIsMCk7ZSh0aGlzLCJyZWFkSWR4IiwwKTtlKHRoaXMsImJ1ZmZlciIsbmV3IEZsb2F0MzJBcnJheShXKnUpKX13cml0ZShzLHQpe3RoaXMud3JpdGVJZHg9KHRoaXMud3JpdGVJZHgrMSkldGhpcy5idWZmZXIubGVuZ3RoLHRoaXMuYnVmZmVyW3RoaXMud3JpdGVJZHhdPXM7bGV0IGk9TWF0aC5taW4oTWF0aC5mbG9vcih1KnQpLHRoaXMuYnVmZmVyLmxlbmd0aC0xKTt0aGlzLnJlYWRJZHg9dGhpcy53cml0ZUlkeC1pLHRoaXMucmVhZElkeDwwJiYodGhpcy5yZWFkSWR4Kz10aGlzLmJ1ZmZlci5sZW5ndGgpfXVwZGF0ZShzLHQpe3JldHVybiB0aGlzLndyaXRlKHMsdCksdGhpcy5idWZmZXJbdGhpcy5yZWFkSWR4XX19Y2xhc3MgWHtjb25zdHJ1Y3Rvcigpe2UodGhpcywiZGVsYXkiLG5ldyBSKTtlKHRoaXMsIm1vZHVsYXRvciIsbmV3IGspfXVwZGF0ZShzLHQsaSxuLGwpe2NvbnN0IHI9dGhpcy5tb2R1bGF0b3IudXBkYXRlKG4pKmwscD10aGlzLmRlbGF5LnVwZGF0ZShzLGkqKDErcikpO3JldHVybiBUKHMscCx0KX19Y2xhc3MgVXtjb25zdHJ1Y3Rvcigpe2UodGhpcywiaG9sZCIsMCk7ZSh0aGlzLCJ0IiwwKX11cGRhdGUocyx0KXtyZXR1cm4gdGhpcy50KysldD09PTAmJih0aGlzLnQ9MCx0aGlzLmhvbGQ9cyksdGhpcy5ob2xkfX1jbGFzcyBZe3VwZGF0ZShzLHQpe3Q9TWF0aC5tYXgoMSx0KTtjb25zdCBpPU1hdGgucG93KDIsdC0xKTtyZXR1cm4gTWF0aC5yb3VuZChzKmkpL2l9fWNsYXNzIFp7dXBkYXRlKHMsdD0wLGk9MSl7aT1NYXRoLm1heCguMDAxLE1hdGgubWluKDEsaSkpO2NvbnN0IG49TWF0aC5leHBtMSh0KTtyZXR1cm4oMStuKSpzLygxK24qTWF0aC5hYnMocykpKml9fWNsYXNzIHd7Y29uc3RydWN0b3Iocyx0LGkpe2UodGhpcywiYnVmZmVyIik7ZSh0aGlzLCJzYW1wbGVSYXRlIik7ZSh0aGlzLCJwb3MiLDApO2UodGhpcywic2FtcGxlRnJlcSIsQSgpKTt0aGlzLmJ1ZmZlcj1zLHRoaXMuc2FtcGxlUmF0ZT10LHRoaXMuZHVyYXRpb249dGhpcy5idWZmZXIubGVuZ3RoL3RoaXMuc2FtcGxlUmF0ZSx0aGlzLnNwZWVkPXUvdGhpcy5zYW1wbGVSYXRlLGkmJih0aGlzLnNwZWVkKj10aGlzLmR1cmF0aW9uKX11cGRhdGUocyl7aWYodGhpcy5wb3M+PXRoaXMuYnVmZmVyLmxlbmd0aClyZXR1cm4gMDtjb25zdCB0PXMvdGhpcy5zYW1wbGVGcmVxKnRoaXMuc3BlZWQ7bGV0IGk9dGhpcy5idWZmZXJbTWF0aC5mbG9vcih0aGlzLnBvcyldO3JldHVybiB0aGlzLnBvcz10aGlzLnBvcyt0LGl9fWUodywic2FtcGxlcyIsbmV3IE1hcCk7Y29uc3QgeT0oaCxzPSJsaW5lYXIiLHQpPT57Y29uc3RbcixwLGEsY109aDtpZihyPT1udWxsJiZwPT1udWxsJiZhPT1udWxsJiZjPT1udWxsKXJldHVybiB0Pz9bLjAwMSwuMDAxLDEsLjAxXTtjb25zdCBkPWE/PyhyIT1udWxsJiZwPT1udWxsfHxyPT1udWxsJiZwPT1udWxsPzE6LjAwMSk7cmV0dXJuW01hdGgubWF4KHI/PzAsLjAwMSksTWF0aC5tYXgocD8/MCwuMDAxKSxNYXRoLm1pbihkLDEpLE1hdGgubWF4KGM/PzAsLjAxKV19O2xldCBEPXtzaW5lOmcsc2F3OlMsemF3Okksc2F3dG9vdGg6Uyx6YXd0b290aDpJLHN1cGVyc2F3OkwsdHJpOmssdHJpYW5nbGU6ayxwdWxzZTpDLHNxdWFyZTpDLHB1bHplOk4sZHVzdDpQLGNyYWNrbGU6UCxpbXB1bHNlOiQsd2hpdGU6Ryxicm93bjpqLHBpbms6Qn07Y29uc3QgSD17Y2hvcnVzOjAsbm90ZTo0OCxzOiJ0cmlhbmdsZSIsYmFuazoiIixnYWluOjEscG9zdGdhaW46MSx2ZWxvY2l0eToxLGRlbnNpdHk6Ii4wMyIsZnR5cGU6IjEyZGIiLGZhbmNob3I6MCxyZXNvbmFuY2U6MCxocmVzb25hbmNlOjAsYmFuZHE6MCxjaGFubmVsczpbMSwyXSxwaGFzZXJkZXB0aDouNzUsc2hhcGV2b2w6MSxkaXN0b3J0dm9sOjEsZGVsYXk6MCxieXRlQmVhdEV4cHJlc3Npb246IjAiLGRlbGF5ZmVlZGJhY2s6LjUsZGVsYXlzcGVlZDoxLGRlbGF5dGltZTouMjUsb3JiaXQ6MSxpOjEsZmZ0OjgsejoidHJpYW5nbGUiLHBhbjouNSxmbWg6MSxmbWVudjowLHNwZWVkOjEscHc6LjV9O2xldCBvPWg9PkhbaF07Y29uc3QgSj17YzowLGQ6MixlOjQsZjo1LGc6NyxhOjksYjoxMX0sSz17IiMiOjEsYjotMSxzOjEsZjotMX0sUT0oaCxzPTMpPT57dmFyIGE7bGV0W3QsaT0iIixuPSIiXT0oKGE9U3RyaW5nKGgpLm1hdGNoKC9eKFthLWdBLUddKShbI2JzZl0qKShbMC05XSopJC8pKT09bnVsbD92b2lkIDA6YS5zbGljZSgxKSl8fFtdO2lmKCF0KXRocm93IG5ldyBFcnJvcignbm90IGEgbm90ZTogIicraCsnIicpO2NvbnN0IGw9Slt0LnRvTG93ZXJDYXNlKCldLHI9KGk9PW51bGw/dm9pZCAwOmkuc3BsaXQoIiIpLnJlZHVjZSgoYyxkKT0+YytLW2RdLDApKXx8MDtyZXR1cm4oTnVtYmVyKG58fHMpKzEpKjEyK2wrcn0sdHQ9aD0+TWF0aC5wb3coMiwoaC02OSkvMTIpKjQ0MCxBPWg9PihoPWh8fG8oIm5vdGUiKSx0eXBlb2YgaD09InN0cmluZyImJihoPVEoaCwzKSksdHQoaCkpO2NsYXNzIHN0e2NvbnN0cnVjdG9yKHMpe2UodGhpcywiaWQiLDApO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJhdHRhY2siKTtlKHRoaXMsImRlY2F5Iik7ZSh0aGlzLCJzdXN0YWluIik7ZSh0aGlzLCJyZWxlYXNlIik7ZSh0aGlzLCJfYmVnaW4iKTtlKHRoaXMsIl9kdXJhdGlvbiIpO2UodGhpcywiX3NvdW5kIik7ZSh0aGlzLCJfY2hhbm5lbHMiLDEpO2UodGhpcywiX2J1ZmZlcnMiKTtlKHRoaXMsInVuaXQiKTtlKHRoaXMsIl9wZW52Iik7ZSh0aGlzLCJwZW52Iik7ZSh0aGlzLCJwYXR0YWNrIik7ZSh0aGlzLCJwZGVjYXkiKTtlKHRoaXMsInBzdXN0YWluIik7ZSh0aGlzLCJwcmVsZWFzZSIpO2UodGhpcywidmliIik7ZSh0aGlzLCJfdmliIik7ZSh0aGlzLCJ2aWJtb2QiKTtlKHRoaXMsIl9mbSIpO2UodGhpcywiZm1oIik7ZSh0aGlzLCJmbWkiKTtlKHRoaXMsIl9mbWVudiIpO2UodGhpcywiZm1hdHRhY2siKTtlKHRoaXMsImZtZGVjYXkiKTtlKHRoaXMsImZtc3VzdGFpbiIpO2UodGhpcywiZm1yZWxlYXNlIik7ZSh0aGlzLCJfbHBlbnYiKTtlKHRoaXMsImxwZW52Iik7ZSh0aGlzLCJscGF0dGFjayIpO2UodGhpcywibHBkZWNheSIpO2UodGhpcywibHBzdXN0YWluIik7ZSh0aGlzLCJscHJlbGVhc2UiKTtlKHRoaXMsIl9ocGVudiIpO2UodGhpcywiaHBlbnYiKTtlKHRoaXMsImhwYXR0YWNrIik7ZSh0aGlzLCJocGRlY2F5Iik7ZSh0aGlzLCJocHN1c3RhaW4iKTtlKHRoaXMsImhwcmVsZWFzZSIpO2UodGhpcywiX2JwZW52Iik7ZSh0aGlzLCJicGVudiIpO2UodGhpcywiYnBhdHRhY2siKTtlKHRoaXMsImJwZGVjYXkiKTtlKHRoaXMsImJwc3VzdGFpbiIpO2UodGhpcywiYnByZWxlYXNlIik7ZSh0aGlzLCJjdXRvZmYiKTtlKHRoaXMsImhjdXRvZmYiKTtlKHRoaXMsImJhbmRmIik7ZSh0aGlzLCJjb2Fyc2UiKTtlKHRoaXMsImNydXNoIik7ZSh0aGlzLCJkaXN0b3J0Iik7ZSh0aGlzLCJmcmVxIik7ZSh0aGlzLCJub3RlIik7ZSh0aGlzLCJfbHBmIik7ZSh0aGlzLCJfaHBmIik7ZSh0aGlzLCJfYnBmIik7ZSh0aGlzLCJfY2hvcnVzIik7ZSh0aGlzLCJfY29hcnNlIik7ZSh0aGlzLCJfY3J1c2giKTtlKHRoaXMsIl9kaXN0b3J0Iik7dmFyIGksbixsLHIscCxhLGM7dGhpcy5mcmVxPz8odGhpcy5mcmVxPUEocy5ub3RlKSksdGhpcy5fYmVnaW49cy5fYmVnaW4sdGhpcy5fZHVyYXRpb249cy5fZHVyYXRpb24sdGhpcy5yZWxlYXNlPXMucmVsZWFzZT8/MDtsZXQgdD10aGlzO2lmKE9iamVjdC5hc3NpZ24odCxzKSx0LnM9dC5zPz9vKCJzIiksdC5nYWluPV8odC5nYWluPz9vKCJnYWluIikpLHQudmVsb2NpdHk9Xyh0LnZlbG9jaXR5Pz9vKCJ2ZWxvY2l0eSIpKSx0LnBvc3RnYWluPV8odC5wb3N0Z2Fpbj8/bygicG9zdGdhaW4iKSksdC5kZW5zaXR5PXQuZGVuc2l0eT8/bygiZGVuc2l0eSIpLHQuZmFuY2hvcj10LmZhbmNob3I/P28oImZhbmNob3IiKSx0LmRyaXZlPXQuZHJpdmU/Py42OSx0LnBoYXNlcmRlcHRoPXQucGhhc2VyZGVwdGg/P28oInBoYXNlcmRlcHRoIiksdC5zaGFwZXZvbD1fKHQuc2hhcGV2b2w/P28oInNoYXBldm9sIikpLHQuZGlzdG9ydHZvbD1fKHQuZGlzdG9ydHZvbD8/bygiZGlzdG9ydHZvbCIpKSx0Lmk9dC5pPz9vKCJpIiksdC5jaG9ydXM9dC5jaG9ydXM/P28oImNob3J1cyIpLHQuZmZ0PXQuZmZ0Pz9vKCJmZnQiKSx0LnBhbj10LnBhbj8/bygicGFuIiksdC5vcmJpdD10Lm9yYml0Pz9vKCJvcmJpdCIpLHQuZm1lbnY9dC5mbWVudj8/bygiZm1lbnYiKSx0LnJlc29uYW5jZT10LnJlc29uYW5jZT8/bygicmVzb25hbmNlIiksdC5ocmVzb25hbmNlPXQuaHJlc29uYW5jZT8/bygiaHJlc29uYW5jZSIpLHQuYmFuZHE9dC5iYW5kcT8/bygiYmFuZHEiKSx0LnNwZWVkPXQuc3BlZWQ/P28oInNwZWVkIiksdC5wdz10LnB3Pz9vKCJwdyIpLFt0LmF0dGFjayx0LmRlY2F5LHQuc3VzdGFpbix0LnJlbGVhc2VdPXkoW3QuYXR0YWNrLHQuZGVjYXksdC5zdXN0YWluLHQucmVsZWFzZV0pLHQuX2hvbGRFbmQ9dC5fYmVnaW4rdC5fZHVyYXRpb24sdC5fZW5kPXQuX2hvbGRFbmQrdC5yZWxlYXNlKy4wMSx0LmZtaSYmKHQucz09PSJzYXcifHx0LnM9PT0ic2F3dG9vdGgiKSYmKHQucz0iemF3IiksRFt0LnNdKXtjb25zdCBkPURbdC5zXTt0Ll9zb3VuZD1uZXcgZCx0Ll9jaGFubmVscz0xfWVsc2UgaWYody5zYW1wbGVzLmhhcyh0LnMpKXtjb25zdCBkPXcuc2FtcGxlcy5nZXQodC5zKTt0Ll9idWZmZXJzPVtdLHQuX2NoYW5uZWxzPWQuY2hhbm5lbHMubGVuZ3RoO2ZvcihsZXQgYj0wO2I8dC5fY2hhbm5lbHM7YisrKXQuX2J1ZmZlcnMucHVzaChuZXcgdyhkLmNoYW5uZWxzW2JdLGQuc2FtcGxlUmF0ZSx0LnVuaXQ9PT0iYyIpKX1lbHNlIGNvbnNvbGUud2Fybigic291bmQgbm90IGxvYWRlZCIsdC5zKTt0LnBlbnYmJih0Ll9wZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV09eShbdC5wYXR0YWNrLHQucGRlY2F5LHQucHN1c3RhaW4sdC5wcmVsZWFzZV0pKSx0LnZpYiYmKHQuX3ZpYj1uZXcgZyx0LnZpYm1vZD10LnZpYm1vZD8/bygidmlibW9kIikpLHQuZm1pJiYodC5fZm09bmV3IGcsdC5mbWg9dC5mbWg/P28oImZtaCIpLHQuZm1lbnYmJih0Ll9mbWVudj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksW3QuZm1hdHRhY2ssdC5mbWRlY2F5LHQuZm1zdXN0YWluLHQuZm1yZWxlYXNlXT15KFt0LmZtYXR0YWNrLHQuZm1kZWNheSx0LmZtc3VzdGFpbix0LmZtcmVsZWFzZV0pKSksdC5fYWRzcj1uZXcgdih7ZGVjYXlDdXJ2ZToyfSksdC5kZWxheT1fKHQuZGVsYXk/P28oImRlbGF5IikpLHQuZGVsYXlmZWVkYmFjaz10LmRlbGF5ZmVlZGJhY2s/P28oImRlbGF5ZmVlZGJhY2siKSx0LmRlbGF5c3BlZWQ9dC5kZWxheXNwZWVkPz9vKCJkZWxheXNwZWVkIiksdC5kZWxheXRpbWU9dC5kZWxheXRpbWU/P28oImRlbGF5dGltZSIpLHQubHBlbnYmJih0Ll9scGVudj1uZXcgdih7ZGVjYXlDdXJ2ZTo0fSksW3QubHBhdHRhY2ssdC5scGRlY2F5LHQubHBzdXN0YWluLHQubHByZWxlYXNlXT15KFt0LmxwYXR0YWNrLHQubHBkZWNheSx0Lmxwc3VzdGFpbix0LmxwcmVsZWFzZV0pKSx0LmhwZW52JiYodC5faHBlbnY9bmV3IHYoe2RlY2F5Q3VydmU6NH0pLFt0LmhwYXR0YWNrLHQuaHBkZWNheSx0Lmhwc3VzdGFpbix0LmhwcmVsZWFzZV09eShbdC5ocGF0dGFjayx0LmhwZGVjYXksdC5ocHN1c3RhaW4sdC5ocHJlbGVhc2VdKSksdC5icGVudiYmKHQuX2JwZW52PW5ldyB2KHtkZWNheUN1cnZlOjR9KSxbdC5icGF0dGFjayx0LmJwZGVjYXksdC5icHN1c3RhaW4sdC5icHJlbGVhc2VdPXkoW3QuYnBhdHRhY2ssdC5icGRlY2F5LHQuYnBzdXN0YWluLHQuYnByZWxlYXNlXSkpLHQuX2Nob3J1cz10LmNob3J1cz9bXTpudWxsLHQuX2xwZj10LmN1dG9mZj9bXTpudWxsLHQuX2hwZj10LmhjdXRvZmY/W106bnVsbCx0Ll9icGY9dC5iYW5kZj9bXTpudWxsLHQuX2NvYXJzZT10LmNvYXJzZT9bXTpudWxsLHQuX2NydXNoPXQuY3J1c2g/W106bnVsbCx0Ll9kaXN0b3J0PXQuZGlzdG9ydD9bXTpudWxsO2ZvcihsZXQgZD0wO2Q8dGhpcy5fY2hhbm5lbHM7ZCsrKShpPXQuX2xwZik9PW51bGx8fGkucHVzaChuZXcgcSksKG49dC5faHBmKT09bnVsbHx8bi5wdXNoKG5ldyBxKSwobD10Ll9icGYpPT1udWxsfHxsLnB1c2gobmV3IHEpLChyPXQuX2Nob3J1cyk9PW51bGx8fHIucHVzaChuZXcgWCksKHA9dC5fY29hcnNlKT09bnVsbHx8cC5wdXNoKG5ldyBVKSwoYT10Ll9jcnVzaCk9PW51bGx8fGEucHVzaChuZXcgWSksKGM9dC5fZGlzdG9ydCk9PW51bGx8fGMucHVzaChuZXcgWil9dXBkYXRlKHMpe2lmKCF0aGlzLl9zb3VuZCYmIXRoaXMuX2J1ZmZlcnMpcmV0dXJuIDA7bGV0IHQ9KyhzPj10aGlzLl9iZWdpbiYmczw9dGhpcy5faG9sZEVuZCksaT10aGlzLmZyZXEqdGhpcy5zcGVlZDtpZih0aGlzLl9mbSYmdGhpcy5mbWghPT12b2lkIDAmJnRoaXMuZm1pIT09dm9pZCAwKXtsZXQgYT10aGlzLmZtaTtpZih0aGlzLl9mbWVudil7Y29uc3QgYj10aGlzLl9mbWVudi51cGRhdGUocyx0LHRoaXMuZm1hdHRhY2ssdGhpcy5mbWRlY2F5LHRoaXMuZm1zdXN0YWluLHRoaXMuZm1yZWxlYXNlKTthPXRoaXMuZm1lbnYqYiphfWNvbnN0IGM9aSp0aGlzLmZtaCxkPWMqYTtpPWkrdGhpcy5fZm0udXBkYXRlKGMpKmR9aWYodGhpcy5fdmliJiZ0aGlzLnZpYm1vZCE9PXZvaWQgMCYmKGk9aSoyKioodGhpcy5fdmliLnVwZGF0ZSh0aGlzLnZpYikqdGhpcy52aWJtb2QvMTIpKSx0aGlzLl9wZW52JiZ0aGlzLnBlbnYhPT12b2lkIDApe2NvbnN0IGE9dGhpcy5fcGVudi51cGRhdGUocyx0LHRoaXMucGF0dGFjayx0aGlzLnBkZWNheSx0aGlzLnBzdXN0YWluLHRoaXMucHJlbGVhc2UpO2k9aSthKnRoaXMucGVudn1sZXQgbj10aGlzLmN1dG9mZjtpZihuIT09dm9pZCAwJiZ0aGlzLl9scGVudil7Y29uc3QgYT10aGlzLl9scGVudi51cGRhdGUocyx0LHRoaXMubHBhdHRhY2ssdGhpcy5scGRlY2F5LHRoaXMubHBzdXN0YWluLHRoaXMubHByZWxlYXNlKTtuPXRoaXMubHBlbnYqYSpuK259bGV0IGw9dGhpcy5oY3V0b2ZmO2lmKGwhPT12b2lkIDAmJnRoaXMuX2hwZW52JiZ0aGlzLmhwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2hwZW52LnVwZGF0ZShzLHQsdGhpcy5ocGF0dGFjayx0aGlzLmhwZGVjYXksdGhpcy5ocHN1c3RhaW4sdGhpcy5ocHJlbGVhc2UpO2w9MioqdGhpcy5ocGVudiphKmwrbH1sZXQgcj10aGlzLmJhbmRmO2lmKHIhPT12b2lkIDAmJnRoaXMuX2JwZW52JiZ0aGlzLmJwZW52IT09dm9pZCAwKXtjb25zdCBhPXRoaXMuX2JwZW52LnVwZGF0ZShzLHQsdGhpcy5icGF0dGFjayx0aGlzLmJwZGVjYXksdGhpcy5icHN1c3RhaW4sdGhpcy5icHJlbGVhc2UpO3I9MioqdGhpcy5icGVudiphKnIrcn1jb25zdCBwPXRoaXMuX2Fkc3IudXBkYXRlKHMsdCx0aGlzLmF0dGFjayx0aGlzLmRlY2F5LHRoaXMuc3VzdGFpbix0aGlzLnJlbGVhc2UpO2ZvcihsZXQgYT0wO2E8dGhpcy5fY2hhbm5lbHM7YSsrKXtpZih0aGlzLl9zb3VuZCYmdGhpcy5zPT09InB1bHNlIj90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSx0aGlzLnB3KTp0aGlzLl9zb3VuZD90aGlzLm91dFthXT10aGlzLl9zb3VuZC51cGRhdGUoaSk6dGhpcy5fYnVmZmVycyYmKHRoaXMub3V0W2FdPXRoaXMuX2J1ZmZlcnNbYV0udXBkYXRlKGkpKSx0aGlzLm91dFthXT10aGlzLm91dFthXSp0aGlzLmdhaW4qdGhpcy52ZWxvY2l0eSx0aGlzLl9jaG9ydXMpe2NvbnN0IGM9dGhpcy5fY2hvcnVzW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNob3J1cywuMDMrLjA1KmEsMSwuMTEpO3RoaXMub3V0W2FdPWMrdGhpcy5vdXRbYV19dGhpcy5fbHBmJiYodGhpcy5fbHBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxuLHRoaXMucmVzb25hbmNlKSx0aGlzLm91dFthXT10aGlzLl9scGZbYV0uczEpLHRoaXMuX2hwZiYmKHRoaXMuX2hwZlthXS51cGRhdGUodGhpcy5vdXRbYV0sbCx0aGlzLmhyZXNvbmFuY2UpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdLXRoaXMuX2hwZlthXS5zMSksdGhpcy5fYnBmJiYodGhpcy5fYnBmW2FdLnVwZGF0ZSh0aGlzLm91dFthXSxyLHRoaXMuYmFuZHEpLHRoaXMub3V0W2FdPXRoaXMuX2JwZlthXS5zMCksdGhpcy5fY29hcnNlJiYodGhpcy5vdXRbYV09dGhpcy5fY29hcnNlW2FdLnVwZGF0ZSh0aGlzLm91dFthXSx0aGlzLmNvYXJzZSkpLHRoaXMuX2NydXNoJiYodGhpcy5vdXRbYV09dGhpcy5fY3J1c2hbYV0udXBkYXRlKHRoaXMub3V0W2FdLHRoaXMuY3J1c2gpKSx0aGlzLl9kaXN0b3J0JiYodGhpcy5vdXRbYV09dGhpcy5fZGlzdG9ydFthXS51cGRhdGUodGhpcy5vdXRbYV0sdGhpcy5kaXN0b3J0LHRoaXMuZGlzdG9ydHZvbCkpLHRoaXMub3V0W2FdPXRoaXMub3V0W2FdKnAsdGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qdGhpcy5wb3N0Z2Fpbix0aGlzLl9idWZmZXJzfHwodGhpcy5vdXRbYV09dGhpcy5vdXRbYV0qLjIpfWlmKHRoaXMuX2NoYW5uZWxzPT09MSYmKHRoaXMub3V0WzFdPXRoaXMub3V0WzBdKSx0aGlzLnBhbiE9PS41KXtjb25zdCBhPXRoaXMucGFuKk1hdGguUEkvMjt0aGlzLm91dFswXT10aGlzLm91dFswXSpNYXRoLmNvcyhhKSx0aGlzLm91dFsxXT10aGlzLm91dFsxXSpNYXRoLnNpbihhKX19fWNsYXNzIGV0e2NvbnN0cnVjdG9yKHM9NDhlMyx0PTApe2UodGhpcywidm9pY2VzIixbXSk7ZSh0aGlzLCJ2aWQiLDApO2UodGhpcywicSIsW10pO2UodGhpcywib3V0IixbMCwwXSk7ZSh0aGlzLCJkZWxheXNlbmQiLFswLDBdKTtlKHRoaXMsImRlbGF5dGltZSIsbygiZGVsYXl0aW1lIikpO2UodGhpcywiZGVsYXlmZWVkYmFjayIsbygiZGVsYXlmZWVkYmFjayIpKTtlKHRoaXMsImRlbGF5c3BlZWQiLG8oImRlbGF5c3BlZWQiKSk7ZSh0aGlzLCJ0IiwwKTt0aGlzLnNhbXBsZVJhdGU9cyx0aGlzLnQ9TWF0aC5mbG9vcih0KnMpLHRoaXMuX2RlbGF5TD1uZXcgUix0aGlzLl9kZWxheVI9bmV3IFJ9bG9hZFNhbXBsZShzLHQsaSl7dy5zYW1wbGVzLnNldChzLHtjaGFubmVsczp0LHNhbXBsZVJhdGU6aX0pfXNjaGVkdWxlU3Bhd24ocyl7aWYocy5fYmVnaW49PT12b2lkIDApdGhyb3cgbmV3IEVycm9yKCJbZG91Z2hdOiBzY2hlZHVsZVNwYXduIGV4cGVjdGVkIF9iZWdpbiB0byBiZSBzZXQiKTtpZihzLl9kdXJhdGlvbj09PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoIltkb3VnaF06IHNjaGVkdWxlU3Bhd24gZXhwZWN0ZWQgX2R1cmF0aW9uIHRvIGJlIHNldCIpO3Muc2FtcGxlUmF0ZT10aGlzLnNhbXBsZVJhdGU7Y29uc3QgdD1NYXRoLmZsb29yKHMuX2JlZ2luKnRoaXMuc2FtcGxlUmF0ZSk7dGhpcy5zY2hlZHVsZSh7dGltZTp0LHR5cGU6InNwYXduIixhcmc6c30pfXNwYXduKHMpe3MuaWQ9dGhpcy52aWQrKztjb25zdCB0PW5ldyBzdChzKTt0aGlzLnZvaWNlcy5wdXNoKHQpO2NvbnN0IGk9TWF0aC5jZWlsKHQuX2VuZCp0aGlzLnNhbXBsZVJhdGUpO3RoaXMuc2NoZWR1bGUoe3RpbWU6aSx0eXBlOiJkZXNwYXduIixhcmc6dC5pZH0pfWRlc3Bhd24ocyl7dGhpcy52b2ljZXM9dGhpcy52b2ljZXMuZmlsdGVyKHQ9PnQuaWQhPT1zKX1zY2hlZHVsZShzKXtpZighdGhpcy5xLmxlbmd0aCl7dGhpcy5xLnB1c2gocyk7cmV0dXJufWxldCB0PTA7Zm9yKDt0PHRoaXMucS5sZW5ndGgmJnRoaXMucVt0XS50aW1lPHMudGltZTspdCsrO3RoaXMucS5zcGxpY2UodCwwLHMpfXVwZGF0ZSgpe2Zvcig7dGhpcy5xLmxlbmd0aD4wJiZ0aGlzLnFbMF0udGltZTw9dGhpcy50Oyl0aGlzW3RoaXMucVswXS50eXBlXSh0aGlzLnFbMF0uYXJnKSx0aGlzLnEuc2hpZnQoKTt0aGlzLm91dFswXT0wLHRoaXMub3V0WzFdPTA7Zm9yKGxldCBpPTA7aTx0aGlzLnZvaWNlcy5sZW5ndGg7aSsrKXRoaXMudm9pY2VzW2ldLnVwZGF0ZSh0aGlzLnQvdGhpcy5zYW1wbGVSYXRlKSx0aGlzLm91dFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdLHRoaXMub3V0WzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0sdGhpcy52b2ljZXNbaV0uZGVsYXkmJih0aGlzLmRlbGF5c2VuZFswXSs9dGhpcy52b2ljZXNbaV0ub3V0WzBdKnRoaXMudm9pY2VzW2ldLmRlbGF5LHRoaXMuZGVsYXlzZW5kWzFdKz10aGlzLnZvaWNlc1tpXS5vdXRbMV0qdGhpcy52b2ljZXNbaV0uZGVsYXksdGhpcy5kZWxheXRpbWU9dGhpcy52b2ljZXNbaV0uZGVsYXl0aW1lLHRoaXMuZGVsYXlzcGVlZD10aGlzLnZvaWNlc1tpXS5kZWxheXNwZWVkLHRoaXMuZGVsYXlmZWVkYmFjaz10aGlzLnZvaWNlc1tpXS5kZWxheWZlZWRiYWNrKTtjb25zdCBzPXRoaXMuX2RlbGF5TC51cGRhdGUodGhpcy5kZWxheXNlbmRbMF0sdGhpcy5kZWxheXRpbWUpLHQ9dGhpcy5fZGVsYXlSLnVwZGF0ZSh0aGlzLmRlbGF5c2VuZFsxXSx0aGlzLmRlbGF5dGltZSk7dGhpcy5kZWxheXNlbmRbMF09cyp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5kZWxheXNlbmRbMV09dCp0aGlzLmRlbGF5ZmVlZGJhY2ssdGhpcy5vdXRbMF0rPXMsdGhpcy5vdXRbMV0rPXQsdGhpcy50Kyt9fWNvbnN0IGl0PShoLHMsdCk9Pk1hdGgubWluKE1hdGgubWF4KGgscyksdCk7Y2xhc3MgYXQgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3J7Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuZG91Z2g9bmV3IGV0KHNhbXBsZVJhdGUsY3VycmVudFRpbWUpLHRoaXMucG9ydC5vbm1lc3NhZ2U9cz0+e3MuZGF0YS5zcGF3bj90aGlzLmRvdWdoLnNjaGVkdWxlU3Bhd24ocy5kYXRhLnNwYXduKTpzLmRhdGEuc2FtcGxlP3RoaXMuZG91Z2gubG9hZFNhbXBsZShzLmRhdGEuc2FtcGxlLHMuZGF0YS5jaGFubmVscyxzLmRhdGEuc2FtcGxlUmF0ZSk6cy5kYXRhLnNhbXBsZXM/cy5kYXRhLnNhbXBsZXMuZm9yRWFjaCgoW3QsaSxuXSk9Pnt0aGlzLmRvdWdoLmxvYWRTYW1wbGUodCxpLG4pfSk6Y29uc29sZS5sb2coInVucmVjb2duaXplZCBldmVudCB0eXBlIixzLmRhdGEpfX1wcm9jZXNzKHMsdCxpKXtpZih0aGlzLmRpc2Nvbm5lY3RlZClyZXR1cm4hMTtjb25zdCBuPXRbMF07Zm9yKGxldCBsPTA7bDxuWzBdLmxlbmd0aDtsKyspe3RoaXMuZG91Z2gudXBkYXRlKCk7Zm9yKGxldCByPTA7cjxuLmxlbmd0aDtyKyspbltyXVtsXT1pdCh0aGlzLmRvdWdoLm91dFtyXSwtMSwxKX1yZXR1cm4hMH19cmVnaXN0ZXJQcm9jZXNzb3IoImRvdWdoLXByb2Nlc3NvciIsYXQpfSkoKTsK";const Uc=Pc;xc(Uc);const{Pattern:jc,logger:Dt,repl:Bc}=yn;zn(Dt);const en=t=>(t.ensureObjectValue(),t.value),vc=(t,e,n,c,a)=>ee(en(t),a,n,c,t.whole?.begin.valueOf());async function Lo(t,e,n,c,a,o,s,d=void 0){let l=y();await l.close(),l=new OfflineAudioContext(2,(c-n)/e*a,a),Xe(l),ye(new Ue(l)),await $e({maxPolyphony:o,multiChannelOrbits:s}),Dt("[webaudio] preloading");let h=t.queryArc(n,c,{_cps:e}).sort((i,u)=>i.whole.begin.valueOf()-u.whole.begin.valueOf());for(const i of h)if(i.hasOnset())try{await ee(en(i),(i.whole.begin.valueOf()-n)/e,i.duration/e,e,(i.whole?.begin.valueOf()-n)/e)}catch(u){Re(u,"webaudio")}return Dt("[webaudio] start rendering"),l.startRendering().then(i=>{const u=Qc(i),Z=new Blob([u],{type:"audio/wav"}),b=URL.createObjectURL(Z),X=document.createElement("a");X.href=b,d=d?`${d}.wav`:`${new Date().toISOString()}.wav`,X.download=`${d}`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(b)}).finally(async()=>{Xe(null),ye(null),Hc()})}function Mo(t={}){return t={getTime:()=>y().currentTime,defaultOutput:vc,...t},Bc(t)}jc.prototype.dough=function(){return this.onTrigger(Cc,1)};function Qc(t,e){e=e||{};var n=t.numberOfChannels,c=t.sampleRate,a=e.float32?3:1,o=a===3?32:16,s;return n===2?s=Oc(t.getChannelData(0),t.getChannelData(1)):s=t.getChannelData(0),Dc(s,a,c,n,o)}function Dc(t,e,n,c,a){var o=a/8,s=c*o,d=new ArrayBuffer(44+t.length*o),l=new DataView(d);return xt(l,0,"RIFF"),l.setUint32(4,36+t.length*o,!0),xt(l,8,"WAVE"),xt(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,e,!0),l.setUint16(22,c,!0),l.setUint32(24,n,!0),l.setUint32(28,n*s,!0),l.setUint16(32,s,!0),l.setUint16(34,a,!0),xt(l,36,"data"),l.setUint32(40,t.length*o,!0),e===1?Ac(l,44,t):Ec(l,44,t),d}function Oc(t,e){for(var n=t.length+e.length,c=new Float32Array(n),a=0,o=0;a<n;)c[a++]=t[o],c[a++]=e[o],o++;return c}function Ec(t,e,n){for(var c=0;c<n.length;c++,e+=4)t.setFloat32(e,n[c],!0)}function Ac(t,e,n){for(var c=0;c<n.length;c++,e+=2){var a=Math.max(-1,Math.min(1,n[c]));t.setInt16(e,a<0?a*32768:a*32767,!0)}}function xt(t,e,n){for(var c=0;c<n.length;c++)t.setUint8(e+c,n.charCodeAt(c))}function qc(t,{align:e=!0,color:n="white",thickness:c=3,scale:a=.25,pos:o=.75,trigger:s=0,ctx:d=Kt(),id:l=1}={}){d.lineWidth=c,d.strokeStyle=n;let h=d.canvas;if(!t){d.beginPath();let G=o*h.height;d.moveTo(0,G),d.lineTo(h.width,G),d.stroke();return}const i=te("time",l);d.beginPath();const u=t.frequencyBinCount;let Z=e?Array.from(i).findIndex((G,p,V)=>p&&V[p-1]>-s&&G<=-s):0;Z=Math.max(Z,0);const b=h.width*1/u;let X=0;for(let G=Z;G<u;G++){const p=i[G]+1,V=(o-a*(p-1))*h.height;G===0?d.moveTo(X,V):d.lineTo(X,V),X+=b}d.stroke()}function $c(t,{color:e="white",scale:n=.25,pos:c=.75,lean:a=.5,min:o=-150,max:s=0,ctx:d=Kt(),id:l=1}={}){if(!t){d.beginPath();let X=c*i.height;d.moveTo(0,X),d.lineTo(i.width,X),d.stroke();return}const h=te("frequency",l),i=d.canvas;d.fillStyle=e;const u=t.frequencyBinCount,Z=i.width*1/u;let b=0;for(let X=0;X<u;X++){const p=Me((h[X]-o)/(s-o),0,1)*n,V=p*i.height,m=(c-p*a)*i.height;d.fillRect(b,m,Math.max(Z,1),V),b+=Z}}function nn(t=0,e="0,0,0",n=Kt()){t?(n.fillStyle=`rgba(${e},${1-t})`,n.fillRect(0,0,n.canvas.width,n.canvas.height)):n.clearRect(0,0,n.canvas.width,n.canvas.height)}A.prototype.fscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(()=>{nn(t.smear,"0,0,0",t.ctx),H[e]&&$c(H[e],t)},{id:e})};A.prototype.tscope=function(t={}){let e=t.id??1;return this.analyze(e).draw(n=>{t.color=n[0]?.value?.color||ze().foreground,t.color,nn(t.smear,"0,0,0",t.ctx),qc(H[e],t)},{id:e})};A.prototype.scope=A.prototype.tscope;let Le={};A.prototype.spectrum=function(t={}){let e=t.id??1;return this.analyze(e).draw(n=>{t.color=n[0]?.value?.color||Le[e]||ze().foreground,Le[e]=t.color,_c(H[e],t)},{id:e})};A.prototype.scope=A.prototype.tscope;const Ut=new Map;function _c(t,{thickness:e=3,speed:n=1,min:c=-80,max:a=0,ctx:o=Kt(),id:s=1,color:d}={}){if(o.lineWidth=e,o.strokeStyle=d,!t)return;const l=n,h=te("frequency",s),i=o.canvas;o.fillStyle=d;const u=t.frequencyBinCount;let Z=Ut.get(s)||o.getImageData(0,0,i.width,i.height);Ut.set(s,Z),o.clearRect(0,0,o.canvas.width,o.canvas.height),o.putImageData(Z,-l,0);let b=i.width-n;for(let X=0;X<u;X++){const G=Me((h[X]-c)/(a-c),0,1);o.globalAlpha=G;const p=Math.log(X+1)/Math.log(u)*i.height;o.fillRect(b,i.height-p,l,2)}Ut.set(s,o.getImageData(0,0,i.width,i.height))}export{Gt as $,U as A,jn as B,qt as C,ve as D,At as E,wn as F,x as G,co as H,at as I,Et as J,Kn as K,io as L,ac as M,ic as N,Ie as O,uc as P,ro as Q,Mo as R,qc as S,$c as T,Jc as U,Qe as V,De as W,E as X,uo as Y,Xo as Z,Zo as _,lt as a,bo as a0,Ae as a1,N as a2,mo as a3,Rc as a4,xc as a5,fc as a6,ye as a7,H as a8,ct as a9,Fn as aA,Xe as aB,re as aC,bc as aD,Be as aE,ho as aF,Wc as aG,Tc as aa,te as ab,ee as ac,Wo as ad,so as ae,ec as af,nc as ag,cc as ah,oc as ai,lo as aj,lc as ak,jt as al,In as am,Ne as an,be as ao,It as ap,kn as aq,ge as ar,ao as as,qn as at,_n as au,Re as av,zn as aw,Fc as ax,Vo as ay,Cc as az,dt as b,He as c,Te as d,K as e,zc as f,y as g,Vc as h,yo as i,Lc as j,$ as k,Kc as l,_e as m,no as n,rt as o,Lo as p,$e as q,Oe as r,oo as s,Go as t,Hc as u,po as v,vc as w,St as x,$n as y,Cn as z};
